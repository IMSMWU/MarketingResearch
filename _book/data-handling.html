<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data handling | Marketing Research 2019</title>
  <meta name="description" content="An Introduction to Statistics Using R" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data handling | Marketing Research 2019" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An Introduction to Statistics Using R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data handling | Marketing Research 2019" />
  
  <meta name="twitter:description" content="An Introduction to Statistics Using R" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="getting-started.html"/>
<link rel="next" href="introduction-to-statistical-inference.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">MR 2019</a></strong></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="course-materials.html"><a href="course-materials.html"><i class="fa fa-check"></i>Course materials</a><ul>
<li class="chapter" data-level="" data-path="course-materials.html"><a href="course-materials.html#main-reference"><i class="fa fa-check"></i>Main reference</a></li>
<li class="chapter" data-level="" data-path="course-materials.html"><a href="course-materials.html#further-readings"><i class="fa fa-check"></i>Further readings</a></li>
<li class="chapter" data-level="" data-path="course-materials.html"><a href="course-materials.html#datacamp"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="" data-path="course-materials.html"><a href="course-materials.html#other-web-resources"><i class="fa fa-check"></i>Other web-resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#how-to-download-and-install-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> How to download and install R and RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#getting-help"><i class="fa fa-check"></i><b>1.2</b> Getting help</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#functions"><i class="fa fa-check"></i><b>1.3</b> Functions</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#a-typical-r-session"><i class="fa fa-check"></i><b>1.5</b> A typical R session</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-handling.html"><a href="data-handling.html"><i class="fa fa-check"></i><b>2</b> Data handling</a><ul>
<li class="chapter" data-level="2.1" data-path="data-handling.html"><a href="data-handling.html#basic-data-handling"><i class="fa fa-check"></i><b>2.1</b> Basic data handling</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-handling.html"><a href="data-handling.html#creating-objects"><i class="fa fa-check"></i><b>2.1.1</b> Creating objects</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-handling.html"><a href="data-handling.html#data-types"><i class="fa fa-check"></i><b>2.1.2</b> Data types</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-handling.html"><a href="data-handling.html#data-structures"><i class="fa fa-check"></i><b>2.1.3</b> Data structures</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-handling.html"><a href="data-handling.html#data-import-and-export"><i class="fa fa-check"></i><b>2.2</b> Data import and export</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-handling.html"><a href="data-handling.html#getting-data-for-this-course"><i class="fa fa-check"></i><b>2.2.1</b> Getting data for this course</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-handling.html"><a href="data-handling.html#import-data-created-by-other-software-packages"><i class="fa fa-check"></i><b>2.2.2</b> Import data created by other software packages</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-handling.html"><a href="data-handling.html#export-data"><i class="fa fa-check"></i><b>2.2.3</b> Export data</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-handling.html"><a href="data-handling.html#import-data-from-the-web"><i class="fa fa-check"></i><b>2.2.4</b> Import data from the Web</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-handling.html"><a href="data-handling.html#summarizing-data"><i class="fa fa-check"></i><b>2.3</b> Summarizing data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-handling.html"><a href="data-handling.html#summary-statistics"><i class="fa fa-check"></i><b>2.3.1</b> Summary statistics</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-handling.html"><a href="data-handling.html#categorical-variables"><i class="fa fa-check"></i><b>2.3.2</b> Categorical variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-handling.html"><a href="data-handling.html#continuous-variables"><i class="fa fa-check"></i><b>2.3.3</b> Continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-handling.html"><a href="data-handling.html#data-visualization"><i class="fa fa-check"></i><b>2.4</b> Data visualization</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-handling.html"><a href="data-handling.html#categorical-variables-1"><i class="fa fa-check"></i><b>2.4.1</b> Categorical variables</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-handling.html"><a href="data-handling.html#continuous-variables-1"><i class="fa fa-check"></i><b>2.4.2</b> Continuous variables</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-handling.html"><a href="data-handling.html#saving-plots"><i class="fa fa-check"></i><b>2.4.3</b> Saving plots</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-handling.html"><a href="data-handling.html#additional-options"><i class="fa fa-check"></i><b>2.4.4</b> Additional options</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-handling.html"><a href="data-handling.html#writing-reports-using-r-markdown"><i class="fa fa-check"></i><b>2.5</b> Writing reports using R-Markdown</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data-handling.html"><a href="data-handling.html#creating-a-new-r-markdown-document"><i class="fa fa-check"></i><b>2.5.1</b> Creating a new R-Markdown document</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-handling.html"><a href="data-handling.html#text-and-equations"><i class="fa fa-check"></i><b>2.5.2</b> Text and Equations</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-handling.html"><a href="data-handling.html#r-code"><i class="fa fa-check"></i><b>2.5.3</b> R-Code</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-handling.html"><a href="data-handling.html#latex-math"><i class="fa fa-check"></i><b>2.5.4</b> LaTeX Math</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html"><i class="fa fa-check"></i><b>3</b> Introduction to Statistical Inference</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#if-we-knew-it-all"><i class="fa fa-check"></i><b>3.1</b> If we knew it all</a><ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#sampling-from-a-known-population"><i class="fa fa-check"></i><b>3.1.1</b> Sampling from a known population</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#standard-error-of-the-mean"><i class="fa fa-check"></i><b>3.1.2</b> Standard error of the mean</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>3.2</b> The Central Limit Theorem</a></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#using-what-we-actually-know"><i class="fa fa-check"></i><b>3.3</b> Using what we actually know</a><ul>
<li class="chapter" data-level="3.3.1" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#confidence-intervals-for-the-sample-mean"><i class="fa fa-check"></i><b>3.3.1</b> Confidence Intervals for the Sample Mean</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-statistical-inference.html"><a href="introduction-to-statistical-inference.html#summary"><i class="fa fa-check"></i><b>3.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>4</b> Hypothesis testing</a><ul>
<li class="chapter" data-level="4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="4.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#the-null-hypothesis"><i class="fa fa-check"></i><b>4.1.1</b> The null hypothesis</a></li>
<li class="chapter" data-level="4.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-inference-on-a-sample"><i class="fa fa-check"></i><b>4.1.2</b> Statistical inference on a sample</a></li>
<li class="chapter" data-level="4.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#choosing-the-right-test"><i class="fa fa-check"></i><b>4.1.3</b> Choosing the right test</a></li>
<li class="chapter" data-level="4.1.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#summary-1"><i class="fa fa-check"></i><b>4.1.4</b> Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chi-square-test.html"><a href="chi-square-test.html"><i class="fa fa-check"></i><b>5</b> Chi-square test</a><ul>
<li class="chapter" data-level="5.1" data-path="chi-square-test.html"><a href="chi-square-test.html#confidence-intervals-for-proportions"><i class="fa fa-check"></i><b>5.1</b> Confidence intervals for proportions</a></li>
<li class="chapter" data-level="5.2" data-path="chi-square-test.html"><a href="chi-square-test.html#chi-square-test-1"><i class="fa fa-check"></i><b>5.2</b> Chi-square test</a></li>
<li class="chapter" data-level="5.3" data-path="chi-square-test.html"><a href="chi-square-test.html#sample-size-1"><i class="fa fa-check"></i><b>5.3</b> Sample size</a></li>
<li class="chapter" data-level="5.4" data-path="chi-square-test.html"><a href="chi-square-test.html#summary-2"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>6</b> Correlation</a><ul>
<li class="chapter" data-level="6.1" data-path="correlation.html"><a href="correlation.html#correlation-coefficient"><i class="fa fa-check"></i><b>6.1</b> Correlation coefficient</a></li>
<li class="chapter" data-level="6.2" data-path="correlation.html"><a href="correlation.html#significance-testing"><i class="fa fa-check"></i><b>6.2</b> Significance testing</a></li>
<li class="chapter" data-level="6.3" data-path="correlation.html"><a href="correlation.html#summary-3"><i class="fa fa-check"></i><b>6.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="t-test.html"><a href="t-test.html"><i class="fa fa-check"></i><b>7</b> T-Test</a><ul>
<li class="chapter" data-level="7.1" data-path="t-test.html"><a href="t-test.html#one-sample-t-test"><i class="fa fa-check"></i><b>7.1</b> One sample t-test</a></li>
<li class="chapter" data-level="7.2" data-path="t-test.html"><a href="t-test.html#comparing-two-means"><i class="fa fa-check"></i><b>7.2</b> Comparing two means</a><ul>
<li class="chapter" data-level="7.2.1" data-path="t-test.html"><a href="t-test.html#independent-means-t-test"><i class="fa fa-check"></i><b>7.2.1</b> Independent-means t-test</a></li>
<li class="chapter" data-level="7.2.2" data-path="t-test.html"><a href="t-test.html#dependent-means-t-test"><i class="fa fa-check"></i><b>7.2.2</b> Dependent-means t-test</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="t-test.html"><a href="t-test.html#summary-4"><i class="fa fa-check"></i><b>7.3</b> Summary</a><ul>
<li class="chapter" data-level="7.3.1" data-path="t-test.html"><a href="t-test.html#further-considerations"><i class="fa fa-check"></i><b>7.3.1</b> Further considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>8</b> ANOVA</a><ul>
<li class="chapter" data-level="8.1" data-path="anova.html"><a href="anova.html#introduction-1"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="anova.html"><a href="anova.html#decomposing-variance"><i class="fa fa-check"></i><b>8.2</b> Decomposing variance</a><ul>
<li class="chapter" data-level="8.2.1" data-path="anova.html"><a href="anova.html#total-sum-of-squares"><i class="fa fa-check"></i><b>8.2.1</b> Total sum of squares</a></li>
<li class="chapter" data-level="8.2.2" data-path="anova.html"><a href="anova.html#model-sum-of-squares"><i class="fa fa-check"></i><b>8.2.2</b> Model sum of squares</a></li>
<li class="chapter" data-level="8.2.3" data-path="anova.html"><a href="anova.html#residual-sum-of-squares"><i class="fa fa-check"></i><b>8.2.3</b> Residual sum of squares</a></li>
<li class="chapter" data-level="8.2.4" data-path="anova.html"><a href="anova.html#effect-strength"><i class="fa fa-check"></i><b>8.2.4</b> Effect strength</a></li>
<li class="chapter" data-level="8.2.5" data-path="anova.html"><a href="anova.html#test-of-significance"><i class="fa fa-check"></i><b>8.2.5</b> Test of significance</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="anova.html"><a href="anova.html#one-way-anova"><i class="fa fa-check"></i><b>8.3</b> One-way ANOVA</a><ul>
<li class="chapter" data-level="8.3.1" data-path="anova.html"><a href="anova.html#basic-anova"><i class="fa fa-check"></i><b>8.3.1</b> Basic ANOVA</a></li>
<li class="chapter" data-level="8.3.2" data-path="anova.html"><a href="anova.html#post-hoc-tests"><i class="fa fa-check"></i><b>8.3.2</b> Post-hoc tests</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="anova.html"><a href="anova.html#summary-5"><i class="fa fa-check"></i><b>8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>9</b> Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="regression.html"><a href="regression.html#regression-1"><i class="fa fa-check"></i><b>9.1</b> Regression</a><ul>
<li class="chapter" data-level="9.1.1" data-path="regression.html"><a href="regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>9.1.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="9.1.2" data-path="regression.html"><a href="regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>9.1.2</b> Multiple linear regression</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="regression.html"><a href="regression.html#potential-problems"><i class="fa fa-check"></i><b>9.2</b> Potential problems</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regression.html"><a href="regression.html#outliers"><i class="fa fa-check"></i><b>9.2.1</b> Outliers</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression.html"><a href="regression.html#influential-observations"><i class="fa fa-check"></i><b>9.2.2</b> Influential observations</a></li>
<li class="chapter" data-level="9.2.3" data-path="regression.html"><a href="regression.html#non-linearity"><i class="fa fa-check"></i><b>9.2.3</b> Non-linearity</a></li>
<li class="chapter" data-level="9.2.4" data-path="regression.html"><a href="regression.html#non-constant-error-variance"><i class="fa fa-check"></i><b>9.2.4</b> Non-constant error variance</a></li>
<li class="chapter" data-level="9.2.5" data-path="regression.html"><a href="regression.html#non-normally-distributed-errors"><i class="fa fa-check"></i><b>9.2.5</b> Non-normally distributed errors</a></li>
<li class="chapter" data-level="9.2.6" data-path="regression.html"><a href="regression.html#correlation-of-errors"><i class="fa fa-check"></i><b>9.2.6</b> Correlation of errors</a></li>
<li class="chapter" data-level="9.2.7" data-path="regression.html"><a href="regression.html#collinearity"><i class="fa fa-check"></i><b>9.2.7</b> Collinearity</a></li>
<li class="chapter" data-level="9.2.8" data-path="regression.html"><a href="regression.html#omitted-variables"><i class="fa fa-check"></i><b>9.2.8</b> Omitted Variables</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression.html"><a href="regression.html#categorical-predictors"><i class="fa fa-check"></i><b>9.3</b> Categorical predictors</a><ul>
<li class="chapter" data-level="9.3.1" data-path="regression.html"><a href="regression.html#two-categories"><i class="fa fa-check"></i><b>9.3.1</b> Two categories</a></li>
<li class="chapter" data-level="9.3.2" data-path="regression.html"><a href="regression.html#more-than-two-categories"><i class="fa fa-check"></i><b>9.3.2</b> More than two categories</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression.html"><a href="regression.html#summary-6"><i class="fa fa-check"></i><b>9.4</b> Summary</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Marketing Research 2019</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-handling" class="section level1">
<h1><span class="header-section-number">2</span> Data handling</h1>
<p>This chapter covers the basics of data handling in R</p>
<div id="basic-data-handling" class="section level2">
<h2><span class="header-section-number">2.1</span> Basic data handling</h2>
<p><a href="./Code/01-basic_data_handling%20(1).R">You can download the corresponding R-Code here</a></p>
<div id="creating-objects" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Creating objects</h3>
<p>Anything created in R is an object. You can assign values to objects using the assignment operator <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">x &lt;-<span class="st"> &quot;hello world&quot;</span>  <span class="co">#assigns the words &#39;hello world&#39; to the object x</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co"># this is a comment</span></a></code></pre></div>
<p>Note that comments may be included in the code after a <code>#</code>. The text after <code>#</code> is not evaluated when the code is run; they can be written directly after the code or in a separate line.</p>
<p>To see the value of an object, simply type its name into the console and hit enter:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">x  <span class="co">#print the value of x to the console</span></a></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>You can also explicitly tell R to print the value of an object:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">print</span>(x)  <span class="co">#print the value of x to the console</span></a></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>Note that because we assign characters in this case (as opposed to e.g., numeric values), we need to wrap the words in quotation marks, which must always come in pairs. Although RStudio automatically adds a pair of quotation marks (i.e., opening and closing marks) when you enter the opening marks it could be that you end up with a mismatch by accident (e.g., <code>x &lt;- "hello</code>). In this case, R will show you the continuation character “+”. The same could happen if you did not execute the full command by accident. The “+” means that R is expecting more input. If this happens, either add the missing pair, or press ESCAPE to abort the expression and try again.</p>
<p>To change the value of an object, you can simply overwrite the previous value. For example, you could also assign a numeric value to “x” to perform some basic operations:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co">#assigns the value of 2 to the object x</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">x <span class="op">==</span><span class="st"> </span><span class="dv">2</span>  <span class="co">#checks whether the value of x is equal to 2</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is NOT equal to 3</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">x <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is less than 3</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is greater than 3</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Note that the name of the object is completely arbitrary. We could also define a second object “y”, assign it a different value and use it to perform some basic mathematical operations:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">y &lt;-<span class="st"> </span><span class="dv">5</span>  <span class="co">#assigns the value of 2 to the object x</span></a>
<a class="sourceLine" id="cb26-2" title="2">x <span class="op">==</span><span class="st"> </span>y  <span class="co">#checks whether the value of x to the value of y</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">x <span class="op">*</span><span class="st"> </span>y  <span class="co">#multiplication of x and y</span></a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">x <span class="op">+</span><span class="st"> </span>y  <span class="co">#adds the values of x and y together</span></a></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">y<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span>x  <span class="co">#adds the value of y squared and 3x the value of x together</span></a></code></pre></div>
<pre><code>## [1] 31</code></pre>
<p><b>Object names</b></p>
<p>Please note that object names must start with a letter and can only contain letters, numbers, as well as the <code>.</code>, and <code>_</code> separators. It is important to give your objects descriptive names and to be as consistent as possible with the naming structure. In this tutorial we will be using lower case words separated by underscores (e.g., <code>object_name</code>). There are other naming conventions, such as using a <code>.</code> as a separator (e.g., <code>object.name</code>), or using upper case letters (<code>objectName</code>). It doesn’t really matter which one you choose, as long as you are consistent.</p>
</div>
<div id="data-types" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Data types</h3>
<p>The most important types of data are:</p>
<table>
<colgroup>
<col width="14%" />
<col width="85%" />
</colgroup>
<thead>
<tr class="header">
<th>Data type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Numeric</td>
<td>Approximations of the real numbers, <span class="math inline">\(\normalsize\mathbb{R}\)</span> (e.g., mileage a car gets: 23.6, 20.9, etc.)</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Whole numbers, <span class="math inline">\(\normalsize\mathbb{Z}\)</span> (e.g., number of sales: 7, 0, 120, 63, etc.)</td>
</tr>
<tr class="odd">
<td>Character</td>
<td>Text data (strings, e.g., product names)</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>Categorical data for classification (e.g., product groups)</td>
</tr>
<tr class="odd">
<td>Logical</td>
<td>TRUE, FALSE</td>
</tr>
<tr class="even">
<td>Date</td>
<td>Date variables (e.g., sales dates: 21-06-2015, 06-21-15, 21-Jun-2015, etc.)</td>
</tr>
</tbody>
</table>
<p>Variables can be converted from one type to another using the appropriate functions (e.g., <code>as.numeric()</code>,<code>as.integer()</code>,<code>as.character()</code>, <code>as.factor()</code>,<code>as.logical()</code>, <code>as.Date()</code>). For example, we could convert the object <code>y</code> to character as follows:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">y &lt;-<span class="st"> </span><span class="kw">as.character</span>(y)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>## [1] &quot;5&quot;</code></pre>
<p>Notice how the value is in quotation marks since it is now of type character.</p>
<p>Entering a vector of data into R can be done with the <code>c(x1,x2,..,x_n)</code> (“concatenate”) command. In order to be able to use our vector (or any other variable) later on we want to assign it a name using the assignment operator <code>&lt;-</code>. You can choose names arbitrarily (but the first character of a name cannot be a number). Just make sure they are descriptive and unique. Assigning the same name to two variables (e.g. vectors) will result in deletion of the first. Instead of converting a variable we can also create a new one and use an existing one as input. In this case we ommit the <code>as.</code> and simply use the name of the type (e.g. <code>factor()</code>). There is a subtle difference between the two: When converting a variable, with e.g. <code>as.factor()</code>, we can only pass the variable we want to convert without additional arguments and R determines the factor levels by the existing unique values in the variable or just returns the variable itself if it is a factor already. When we specifically create a variable (just <code>factor()</code>, <code>matrix()</code>, etc.), we can and should set the options of this type explicitly. For a factor variable these could be the labels and levels, for a matrix the number of rows and columns and so on.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co"># Numeric:</span></a>
<a class="sourceLine" id="cb36-2" title="2">top10_track_streams &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">163608</span>, <span class="dv">126687</span>, <span class="dv">120480</span>, <span class="dv">110022</span>, </a>
<a class="sourceLine" id="cb36-3" title="3">    <span class="dv">108630</span>, <span class="dv">95639</span>, <span class="dv">94690</span>, <span class="dv">89011</span>, <span class="dv">87869</span>, <span class="dv">85599</span>)</a>
<a class="sourceLine" id="cb36-4" title="4"></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="co"># Character:</span></a>
<a class="sourceLine" id="cb36-6" title="6">top10_artist_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Axwell /</span><span class="ch">\\</span><span class="st"> Ingrosso&quot;</span>, <span class="st">&quot;Imagine Dragons&quot;</span>, </a>
<a class="sourceLine" id="cb36-7" title="7">    <span class="st">&quot;J. Balvin&quot;</span>, <span class="st">&quot;Robin Schulz&quot;</span>, <span class="st">&quot;Jonas Blue&quot;</span>, <span class="st">&quot;David Guetta&quot;</span>, </a>
<a class="sourceLine" id="cb36-8" title="8">    <span class="st">&quot;French Montana&quot;</span>, <span class="st">&quot;Calvin Harris&quot;</span>, <span class="st">&quot;Liam Payne&quot;</span>, </a>
<a class="sourceLine" id="cb36-9" title="9">    <span class="st">&quot;Lauv&quot;</span>)  <span class="co"># Characters have to be put in &#39;&#39;</span></a>
<a class="sourceLine" id="cb36-10" title="10"></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="co"># Factor variable with two categories:</span></a>
<a class="sourceLine" id="cb36-12" title="12">top10_track_explicit &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb36-13" title="13">    <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb36-14" title="14">top10_track_explicit &lt;-<span class="st"> </span><span class="kw">factor</span>(top10_track_explicit, </a>
<a class="sourceLine" id="cb36-15" title="15">    <span class="dt">levels =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;not explicit&quot;</span>, <span class="st">&quot;explicit&quot;</span>))</a>
<a class="sourceLine" id="cb36-16" title="16"></a>
<a class="sourceLine" id="cb36-17" title="17"><span class="co"># Factor variable with more than two categories:</span></a>
<a class="sourceLine" id="cb36-18" title="18">top10_artist_genre &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Alternative&quot;</span>, <span class="st">&quot;Latino&quot;</span>, </a>
<a class="sourceLine" id="cb36-19" title="19">    <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Hip-Hop/Rap&quot;</span>, <span class="st">&quot;Dance&quot;</span>, </a>
<a class="sourceLine" id="cb36-20" title="20">    <span class="st">&quot;Pop&quot;</span>, <span class="st">&quot;Pop&quot;</span>)</a>
<a class="sourceLine" id="cb36-21" title="21">top10_artist_genre &lt;-<span class="st"> </span><span class="kw">as.factor</span>(top10_artist_genre)</a>
<a class="sourceLine" id="cb36-22" title="22"></a>
<a class="sourceLine" id="cb36-23" title="23"><span class="co"># Date:</span></a>
<a class="sourceLine" id="cb36-24" title="24">top_<span class="dv">10</span>_track_release_date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">&quot;2017-05-24&quot;</span>, </a>
<a class="sourceLine" id="cb36-25" title="25">    <span class="st">&quot;2017-06-23&quot;</span>, <span class="st">&quot;2017-07-03&quot;</span>, <span class="st">&quot;2017-06-30&quot;</span>, <span class="st">&quot;2017-05-05&quot;</span>, </a>
<a class="sourceLine" id="cb36-26" title="26">    <span class="st">&quot;2017-06-09&quot;</span>, <span class="st">&quot;2017-07-14&quot;</span>, <span class="st">&quot;2017-06-16&quot;</span>, <span class="st">&quot;2017-05-18&quot;</span>, </a>
<a class="sourceLine" id="cb36-27" title="27">    <span class="st">&quot;2017-05-19&quot;</span>))</a>
<a class="sourceLine" id="cb36-28" title="28"></a>
<a class="sourceLine" id="cb36-29" title="29"><span class="co"># Logical</span></a>
<a class="sourceLine" id="cb36-30" title="30">top10_track_explicit_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb36-31" title="31">    <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)</a></code></pre></div>
<p>In order to “call” a vector we can now simply enter its name:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">top10_track_streams</a></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">top_<span class="dv">10</span>_track_release_date</a></code></pre></div>
<pre><code>##  [1] &quot;2017-05-24&quot; &quot;2017-06-23&quot; &quot;2017-07-03&quot; &quot;2017-06-30&quot; &quot;2017-05-05&quot;
##  [6] &quot;2017-06-09&quot; &quot;2017-07-14&quot; &quot;2017-06-16&quot; &quot;2017-05-18&quot; &quot;2017-05-19&quot;</code></pre>
<p>In order to check the type of a variable the <code>class()</code> function is used.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">class</span>(top_<span class="dv">10</span>_track_release_date)</a></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>The video below gives a general overview of vectors and provides a more in-depth discussion.</p>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Xioc33EZxgU" frameborder="0" allowfullscreen>
</iframe>
</div>
</div>
<div id="data-structures" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Data structures</h3>
<p>Now let’s create a table that contains the variables in columns and each observation in a row (like in SPSS or Excel). There are different data structures in R (e.g., Matrix, Vector, List, Array). In this course, we will mainly use <b>data frames</b>.</p>
<p style="text-align:center;">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/dataframe.JPG" alt="data types" height="320">
</p>
<p>Data frames are similar to matrices but are more flexible in the sense that they may contain different data types (e.g., numeric, character, etc.), where all values of vectors and matrices have to be of the same type (e.g. character). It is often more convenient to use characters instead of numbers (e.g. when indicating a persons sex: “F”, “M” instead of 1 for female , 2 for male). Thus we would like to combine both numeric and character values while retaining the respective desired features. This is where “data frames” come into play. Data frames can have different types of data in each column. For example, we can combine the vectors created above in one data frame using <code>data.frame()</code>. This creates a separate column for each vector, which is usually what we want (similar to SPSS or Excel).</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">music_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(top10_track_streams, top10_artist_names, </a>
<a class="sourceLine" id="cb43-2" title="2">    top10_track_explicit, top10_artist_genre, top_<span class="dv">10</span>_track_release_date, </a>
<a class="sourceLine" id="cb43-3" title="3">    top10_track_explicit_<span class="dv">1</span>)</a></code></pre></div>
<div id="accessing-data-in-data-frames" class="section level4">
<h4><span class="header-section-number">2.1.3.1</span> Accessing data in data frames</h4>
<p>When entering the name of a data frame, R returns the entire data frame:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">music_data  <span class="co"># Returns the entire data frame</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Hint: You may also use the <code>View()</code>-function to view the data in a table format (like in SPSS or Excel), i.e. enter the command <code>View(data)</code>. Note that you can achieve the same by clicking on the small table icon next to the data frame in the “Environment”-window on the right in RStudio.</p>
<p>Sometimes it is convenient to return only specific values instead of the entire data frame. There are a variety of ways to identify the elements of a data frame. One easy way is to explicitly state, which rows and columns you wish to view. The general form of the command is <code>data.frame[rows,columns]</code>. By leaving one of the arguments of <code>data.frame[rows,columns]</code> blank (e.g., <code>data.frame[rows,]</code>) we tell R that we want to access either all rows or columns, respectively. Here are some examples:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">music_data[, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]  <span class="co"># all rows and columns 2,3,4</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[3],"type":["fctr"],"align":["left"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"not explicit","3":"Dance"},{"1":"Imagine Dragons","2":"not explicit","3":"Alternative"},{"1":"J. Balvin","2":"not explicit","3":"Latino"},{"1":"Robin Schulz","2":"not explicit","3":"Dance"},{"1":"Jonas Blue","2":"not explicit","3":"Dance"},{"1":"David Guetta","2":"not explicit","3":"Dance"},{"1":"French Montana","2":"explicit","3":"Hip-Hop/Rap"},{"1":"Calvin Harris","2":"explicit","3":"Dance"},{"1":"Liam Payne","2":"not explicit","3":"Pop"},{"1":"Lauv","2":"not explicit","3":"Pop"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">music_data[, <span class="kw">c</span>(<span class="st">&quot;top10_artist_names&quot;</span>, <span class="st">&quot;top_10_track_release_date&quot;</span>)]  <span class="co"># all rows and columns &#39;top10_artist_names&#39; and &#39;top_10_track_release_date&#39;</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[2],"type":["date"],"align":["right"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"2017-05-24"},{"1":"Imagine Dragons","2":"2017-06-23"},{"1":"J. Balvin","2":"2017-07-03"},{"1":"Robin Schulz","2":"2017-06-30"},{"1":"Jonas Blue","2":"2017-05-05"},{"1":"David Guetta","2":"2017-06-09"},{"1":"French Montana","2":"2017-07-14"},{"1":"Calvin Harris","2":"2017-06-16"},{"1":"Liam Payne","2":"2017-05-18"},{"1":"Lauv","2":"2017-05-19"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1">music_data[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="kw">c</span>(<span class="st">&quot;top10_artist_names&quot;</span>, <span class="st">&quot;top_10_track_release_date&quot;</span>)]  <span class="co"># rows 1 to 5 and columns &#39;top10_artist_names&#39;&#39; and &#39;top_10_track_release_date&#39;</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[2],"type":["date"],"align":["right"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"2017-05-24"},{"1":"Imagine Dragons","2":"2017-06-23"},{"1":"J. Balvin","2":"2017-07-03"},{"1":"Robin Schulz","2":"2017-06-30"},{"1":"Jonas Blue","2":"2017-05-05"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You may also create subsets of the data frame, e.g., using mathematical expressions:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1">music_data[top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>, ]  <span class="co"># show only tracks with explicit lyrics  </span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1">music_data[top10_track_streams <span class="op">&gt;</span><span class="st"> </span><span class="fl">1e+05</span>, ]  <span class="co"># show only tracks with more than 100,000 streams  </span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1">music_data[top10_artist_names <span class="op">==</span><span class="st"> &quot;Robin Schulz&quot;</span>, ]  <span class="co"># returns all observations from artist &#39;Robin Schulz&#39;</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">music_data[top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>, ]  <span class="co"># show only explicit tracks</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The same can be achieved using the <code>subset()</code>-function</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">subset</span>(music_data, top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>)  <span class="co"># selects subsets of observations in a data frame</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1"><span class="co"># creates a new data frame that only contains</span></a>
<a class="sourceLine" id="cb53-2" title="2"><span class="co"># tracks from genre &#39;Dance&#39;</span></a>
<a class="sourceLine" id="cb53-3" title="3">music_data_dance &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, top10_artist_genre <span class="op">==</span><span class="st"> </span></a>
<a class="sourceLine" id="cb53-4" title="4"><span class="st">    &quot;Dance&quot;</span>)</a>
<a class="sourceLine" id="cb53-5" title="5">music_data_dance</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">rm</span>(music_data_dance)  <span class="co"># removes an object from the workspace</span></a></code></pre></div>
<p>You may also change the order of the variables in a data frame by using the <code>order()</code>-function</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="co"># Orders by genre (ascending) and streams</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="co"># (descending)</span></a>
<a class="sourceLine" id="cb55-3" title="3">music_data[<span class="kw">order</span>(top10_artist_genre, <span class="op">-</span>top10_track_streams), </a>
<a class="sourceLine" id="cb55-4" title="4">    ]</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="inspecting-the-content-of-a-data-frame" class="section level4">
<h4><span class="header-section-number">2.1.3.2</span> Inspecting the content of a data frame</h4>
<p>The <code>head()</code> function displays the first X elements/rows of a vector, matrix, table, data frame or function.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">head</span>(music_data, <span class="dv">3</span>)  <span class="co"># returns the first X rows (here, the first 3 rows)</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>tail()</code> function is similar, except it displays the last elements/rows.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">tail</span>(music_data, <span class="dv">3</span>)  <span class="co"># returns the last X rows (here, the last 3 rows)</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>names()</code> returns the names of an R object. When, for example, it is called on a data frame, it returns the names of the columns.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="kw">names</span>(music_data)  <span class="co"># returns the names of the variables in the data frame</span></a></code></pre></div>
<pre><code>## [1] &quot;top10_track_streams&quot;       &quot;top10_artist_names&quot;       
## [3] &quot;top10_track_explicit&quot;      &quot;top10_artist_genre&quot;       
## [5] &quot;top_10_track_release_date&quot; &quot;top10_track_explicit_1&quot;</code></pre>
<p><code>str()</code> displays the internal structure of an R object. In the case of a data frame, it returns the class (e.g., numeric, factor, etc.) of each variable, as well as the number of observations and the number of variables.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1"><span class="kw">str</span>(music_data)  <span class="co"># returns the structure of the data frame</span></a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  6 variables:
##  $ top10_track_streams      : num  163608 126687 120480 110022 108630 ...
##  $ top10_artist_names       : Factor w/ 10 levels &quot;Axwell /\\ Ingrosso&quot;,..: 1 5 6 10 7 3 4 2 9 8
##  $ top10_track_explicit     : Factor w/ 2 levels &quot;not explicit&quot;,..: 1 1 1 1 1 1 2 2 1 1
##  $ top10_artist_genre       : Factor w/ 5 levels &quot;Alternative&quot;,..: 2 1 4 2 2 2 3 2 5 5
##  $ top_10_track_release_date: Date, format: &quot;2017-05-24&quot; &quot;2017-06-23&quot; ...
##  $ top10_track_explicit_1   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</code></pre>
<p><code>nrow()</code> and <code>ncol()</code> return the rows and columns of a data frame or matrix, respectively. <code>dim()</code> displays the dimensions of an R object.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="kw">nrow</span>(music_data)  <span class="co"># returns the number of rows </span></a></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="kw">ncol</span>(music_data)  <span class="co"># returns the number of columns </span></a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="kw">dim</span>(music_data)  <span class="co"># returns the dimensions of a data frame</span></a></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p><code>ls()</code> can be used to list all objects that are associated with an R object.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">ls</span>(music_data)  <span class="co"># list all objects associated with an object</span></a></code></pre></div>
<pre><code>## [1] &quot;top_10_track_release_date&quot; &quot;top10_artist_genre&quot;       
## [3] &quot;top10_artist_names&quot;        &quot;top10_track_explicit&quot;     
## [5] &quot;top10_track_explicit_1&quot;    &quot;top10_track_streams&quot;</code></pre>
</div>
<div id="append-and-delete-variables-tofrom-data-frames" class="section level4">
<h4><span class="header-section-number">2.1.3.3</span> Append and delete variables to/from data frames</h4>
<p>To call a certain column in a data frame, we may also use the <code>$</code> notation. For example, this returns all values associated with the variable “top10_track_streams”:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">music_data<span class="op">$</span>top10_track_streams</a></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<p>Assume that you wanted to add an additional variable to the data frame. You may use the <code>$</code> notation to achieve this:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1"><span class="co"># Create new variable as the log of the number of</span></a>
<a class="sourceLine" id="cb72-2" title="2"><span class="co"># streams</span></a>
<a class="sourceLine" id="cb72-3" title="3">music_data<span class="op">$</span>log_streams &lt;-<span class="st"> </span><span class="kw">log</span>(music_data<span class="op">$</span>top10_track_streams)</a>
<a class="sourceLine" id="cb72-4" title="4"><span class="co"># Create an ascending count variable which might</span></a>
<a class="sourceLine" id="cb72-5" title="5"><span class="co"># serve as an ID</span></a>
<a class="sourceLine" id="cb72-6" title="6">music_data<span class="op">$</span>obs_number &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(music_data)</a>
<a class="sourceLine" id="cb72-7" title="7"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>To delete a variable, you can simply create a <code>subset</code> of the full data frame that excludes the variables that you wish to drop:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">music_data &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, <span class="dt">select =</span> <span class="op">-</span><span class="kw">c</span>(log_streams))  <span class="co"># deletes the variable log streams </span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can also rename variables in a data frame, e.g., using the <code>rename()</code>-function from the <code>plyr</code> package. In the following code “::” signifies that the function “rename” should be taken from the package “plyr”. This can be useful if multiple packages have a function with the same name. Calling a function this way also means that you can access a function without loading the entire package via <code>library()</code>.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1"><span class="kw">library</span>(plyr)</a>
<a class="sourceLine" id="cb74-2" title="2">music_data &lt;-<span class="st"> </span>plyr<span class="op">::</span><span class="kw">rename</span>(music_data, <span class="kw">c</span>(<span class="dt">top10_artist_genre =</span> <span class="st">&quot;genre&quot;</span>, </a>
<a class="sourceLine" id="cb74-3" title="3">    <span class="dt">top_10_track_release_date =</span> <span class="st">&quot;release_date&quot;</span>))</a>
<a class="sourceLine" id="cb74-4" title="4"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that the same can be achieved using:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">names</span>(music_data)[<span class="kw">names</span>(music_data) <span class="op">==</span><span class="st"> &quot;genre&quot;</span>] &lt;-<span class="st"> &quot;top10_artist_genre&quot;</span></a>
<a class="sourceLine" id="cb75-2" title="2"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Or by referring to the index of the variable:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1"><span class="kw">names</span>(music_data)[<span class="dv">4</span>] &lt;-<span class="st"> &quot;genre&quot;</span></a>
<a class="sourceLine" id="cb76-2" title="2"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>

</div>
</div>
</div>
<div id="data-import-and-export" class="section level2">
<h2><span class="header-section-number">2.2</span> Data import and export</h2>
<p>Before you can start your analysis in R, you first need to import the data you wish to perform the analysis on. You will often be faced with different types of data formats (usually produced by some other statistical software like SPSS or Excel or a text editor). Fortunately, R is fairly flexible with respect to the sources from which data may be imported and you can import the most common data formats into R with the help of a few packages. R can, among others, handle data from the following sources:</p>
<p><img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/data_import.JPG" /></p>
<p>In the previous chapter, we saw how we may use the keyboard to input data in R. In the following sections, we will learn how to import data from text files and other statistical software packages.</p>
<div id="getting-data-for-this-course" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Getting data for this course</h3>
<p>Most of the data sets we will be working with in this course will be stored in text files (i.e., .dat, .txt, .csv). There are two ways for you to obtain access to the data sets:</p>
<p><a href="./Code/03-data_import%20(2).R">You can download the corresponding R-Code here</a></p>
<div id="directly-import-datasets-from-github-recommended" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Directly import datasets from GitHub (recommended)</h4>
<p>All data sets we will be working with are stored in a repository on GitHub (similar to other cloud storage services such as Dropbox). If you know the location, where the files are stored, you may conveniently load the data directly from GitHub into R using the <code>read.table()</code> function. The <code>header=TRUE</code> argument indicates that the first line of data represents the header, i.e., it contains the names of the columns. The <code>sep="\t"</code>-argument specifies the delimiter (the character used to separate the columns), which is a TAB in this case.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">test_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/IMSMWU/Teaching/master/MRDA2017/test_data.dat&quot;</span>, </a>
<a class="sourceLine" id="cb77-2" title="2">    <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="download-and-import-datasets-from-learnwu" class="section level4">
<h4><span class="header-section-number">2.2.1.2</span> Download and import datasets from “Learn@WU”</h4>
<p>It is also possible to download the data from the respective folder on the “Learn@WU” platform, placing it in the working directory and importing it from there. However, this requires an additional step to download the file manually first. If you chose this option, please <strong>remember to put the data file in the working directory first</strong>. If the import is not working, check your working directory setting using <code>getwd()</code>. Once you placed the file in the working directory, you can import it using the same command as above. Note that the file must be given as a character string (i.e., in quotation marks) and has to end with the file extension (e.g., .csv, .tsv, etc.).</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" title="1">music_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;music.data.extension&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
</div>
<div id="import-data-created-by-other-software-packages" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Import data created by other software packages</h3>
<p>Sometimes, you may need to import data files created by other software packages, such as Excel or SPSS. In this section we will use the <code>readxl</code> and <code>haven</code> packages to do this. To import a certain file you should first make sure that the file is stored in your current working directory. You can list all file names in your working directory using the <code>list.files()</code> function. If the file is not there, either copy it to your current working directory, or set your working directory to the folder where the file is located using <code>setwd("/path/to/file")</code>. This tells R the folder you are working in. Remember that you have to use <code>/</code> instead of <code>\</code> to specify the path (if you use Windows paths copied from the explorer they will not work). When your file is in your working directory you can simply enter the filename into the respective import command. The import commands offer various options. For more details enter <code>?read_excel</code>, <code>?read_spss</code> after loading the packages.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">list.files</span>()  <span class="co">#lists all files in the current working directory</span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="co"># setwd(&#39;/path/to/file&#39;) #may be used to change the</span></a>
<a class="sourceLine" id="cb79-3" title="3"><span class="co"># working directory to the folder that contains the</span></a>
<a class="sourceLine" id="cb79-4" title="4"><span class="co"># desired file</span></a>
<a class="sourceLine" id="cb79-5" title="5"></a>
<a class="sourceLine" id="cb79-6" title="6"><span class="co"># import excel files</span></a>
<a class="sourceLine" id="cb79-7" title="7"><span class="kw">library</span>(readxl)  <span class="co">#load package to import Excel files</span></a>
<a class="sourceLine" id="cb79-8" title="8"><span class="kw">excel_sheets</span>(<span class="st">&quot;music_data.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb79-9" title="9">music_data_excel &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;music_data.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;mrda_2016_survey&quot;</span>)  <span class="co"># &#39;sheet=x&#39;&#39; specifies which sheet to import</span></a>
<a class="sourceLine" id="cb79-10" title="10"><span class="kw">head</span>(music_data_excel)</a>
<a class="sourceLine" id="cb79-11" title="11"></a>
<a class="sourceLine" id="cb79-12" title="12"><span class="kw">library</span>(haven)  <span class="co">#load package to import SPSS files</span></a>
<a class="sourceLine" id="cb79-13" title="13"><span class="co"># import SPSS files</span></a>
<a class="sourceLine" id="cb79-14" title="14">music_data_spss &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="st">&quot;music_data.sav&quot;</span>)</a>
<a class="sourceLine" id="cb79-15" title="15"><span class="kw">head</span>(music_data_spss)</a></code></pre></div>
<p>The import of other file formats works in a very similar way (e.g., Stata, SAS). Please refer to the respective help-files (e.g., <code>?read_dta</code>, <code>?read_sas</code> …) if you wish to import data created by other software packages.</p>
</div>
<div id="export-data" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Export data</h3>
<p>Exporting to different formats is also easy, as you can just replace “read” with “write” in many of the previously discussed functions (e.g. <code>write.table(object, "file_name")</code>). This will save the data file to the working directory. To check what the current working directory is you can use <code>getwd()</code>. By default, the <code>write.table(object, "file_name")</code>function includes the row number as the first variable. By specifying <code>row.names = FALSE</code>, you may exclude this variable since it doesn’t contain any useful information.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1"><span class="kw">write.table</span>(music_data, <span class="st">&quot;musicData.dat&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb80-2" title="2">    <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)  <span class="co">#writes to a tab-delimited text file</span></a>
<a class="sourceLine" id="cb80-3" title="3"><span class="kw">write.table</span>(music_data, <span class="st">&quot;musicData.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb80-4" title="4">    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)  <span class="co">#writes to a comma-separated value file </span></a>
<a class="sourceLine" id="cb80-5" title="5"><span class="kw">write_sav</span>(music_data, <span class="st">&quot;my_file.sav&quot;</span>)</a></code></pre></div>
</div>
<div id="import-data-from-the-web" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Import data from the Web</h3>
<div id="scraping-data-from-websites" class="section level4">
<h4><span class="header-section-number">2.2.4.1</span> Scraping data from websites</h4>
<p>Sometimes you may come across interesting data on websites that you would like to analyse. Reading data from websites is possible in R, e.g., using the <code>rvest</code> package. Let’s assume you would like to read a table that lists the population of different countries from <a href="https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population" target="_blank">this Wikipedia page</a>. It helps to first inspect the structure of the website (e.g., using tools like <a href="http://selectorgadget.com/" target="_blank">SelectorGadget</a>), so you know which elements you would like to extract. In this case it is fairly obvious that the data are stored in a table for which the associated html-tag is <code>&lt;table&gt;</code>. So let’s read the entire website using <code>read_html(url)</code> and filter all tables using <code>read_html(html_nodes(...,"table"))</code>.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" title="1"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb81-2" title="2">url &lt;-<span class="st"> &quot;https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population&quot;</span></a>
<a class="sourceLine" id="cb81-3" title="3">population &lt;-<span class="st"> </span><span class="kw">read_html</span>(url)</a>
<a class="sourceLine" id="cb81-4" title="4">population &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(population, <span class="st">&quot;table.wikitable&quot;</span>)</a>
<a class="sourceLine" id="cb81-5" title="5"><span class="kw">print</span>(population)</a></code></pre></div>
<pre><code>## {xml_nodeset (1)}
## [1] &lt;table class=&quot;wikitable sortable&quot; style=&quot;text-align:right&quot;&gt;&lt;tbody&gt;\n&lt;tr&gt;\ ...</code></pre>
<p>The output shows that there are two tables on the website and the first one appears to contain the relevant information. So let’s read the first table using the <code>html_table()</code> function. Note that <code>population</code> is of class “list”. A list is a vector that has other R objects (e.g., other vectors, data frames, matrices, etc.) as its elements. If we want to access the data of one of the elements, we have to use two square brackets on each side instead of just one (e.g., <code>population[[1]]</code> gets us the first table from the list of tables on the website; the argument <code>fill = TRUE</code> ensures that empty cells are replaced with missing values when reading the table).</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" title="1">population &lt;-<span class="st"> </span>population[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_table</span>(<span class="dt">fill =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb83-2" title="2"><span class="kw">head</span>(population)  <span class="co">#checks if we scraped the desired data</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country (or dependent territory)"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[3],"type":["chr"],"align":["left"]},{"label":["% of worldpopulation"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Source"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"China[b]","3":"1,402,102,760","4":"18.0%","5":"7 Apr 2020","6":"National population clock[3]"},{"1":"2","2":"India[c]","3":"1,360,738,303","4":"17.5%","5":"7 Apr 2020","6":"National population clock[4]"},{"1":"3","2":"United States[d]","3":"329,584,842","4":"4.24%","5":"7 Apr 2020","6":"National population clock[5]"},{"1":"4","2":"Indonesia","3":"266,911,900","4":"3.43%","5":"1 Jul 2019","6":"National annual projection[6]"},{"1":"5","2":"Pakistan[e]","3":"219,203,520","4":"2.82%","5":"7 Apr 2020","6":"2017 census[7]"},{"1":"6","2":"Brazil","3":"211,358,778","4":"2.72%","5":"7 Apr 2020","6":"National population clock[8]"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can see that population is read as a character variable because of the commas.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">class</span>(population<span class="op">$</span>Population)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>If we wanted to use this variable for some kind of analysis, we would first need to convert it to numeric format using the <code>as.numeric()</code> function. However, before we can do this, we can use the <code>str_replace_all()</code> function from the stringr package, which replaces all matches of a string. In our case, we would like to replace the commas (<code>","</code>) with nothing (<code>""</code>).</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1"><span class="kw">library</span>(stringr)</a>
<a class="sourceLine" id="cb86-2" title="2">population<span class="op">$</span>Population &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">str_replace_all</span>(population<span class="op">$</span>Population, </a>
<a class="sourceLine" id="cb86-3" title="3">    <span class="dt">pattern =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>))  <span class="co">#convert to numeric</span></a>
<a class="sourceLine" id="cb86-4" title="4"><span class="kw">head</span>(population)  <span class="co">#checks if we scraped the desired data</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country (or dependent territory)"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["% of worldpopulation"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Source"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"China[b]","3":"1402102760","4":"18.0%","5":"7 Apr 2020","6":"National population clock[3]"},{"1":"2","2":"India[c]","3":"1360738303","4":"17.5%","5":"7 Apr 2020","6":"National population clock[4]"},{"1":"3","2":"United States[d]","3":"329584842","4":"4.24%","5":"7 Apr 2020","6":"National population clock[5]"},{"1":"4","2":"Indonesia","3":"266911900","4":"3.43%","5":"1 Jul 2019","6":"National annual projection[6]"},{"1":"5","2":"Pakistan[e]","3":"219203520","4":"2.82%","5":"7 Apr 2020","6":"2017 census[7]"},{"1":"6","2":"Brazil","3":"211358778","4":"2.72%","5":"7 Apr 2020","6":"National population clock[8]"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now the variable is of type “numeric” and could be used for analysis.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="kw">class</span>(population<span class="op">$</span>Population)</a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="scraping-data-from-apis" class="section level4">
<h4><span class="header-section-number">2.2.4.2</span> Scraping data from APIs</h4>
<div id="scraping-data-from-apis-directly" class="section level5">
<h5><span class="header-section-number">2.2.4.2.1</span> Scraping data from APIs directly</h5>
<p>Reading data from websites can be tricky since you need to analyze the page structure first. Many web-services (e.g., Facebook, Twitter, YouTube) actually have application programming interfaces (API’s), which you can use to obtain data in a pre-structured format. JSON (JavaScript Object Notation) is a popular lightweight data-interchange format in which data can be obtained. The process of obtaining data is visualized in the following graphic:</p>
<div class="figure">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/API.JPG" alt="Obtaining data from APIs" />
<p class="caption">Obtaining data from APIs</p>
</div>
<p>The process of obtaining data from APIs consists of the following steps:</p>
<ul>
<li>Identify an API that has enough data to be relevant and reliable (e.g., <a href="http://www.programmableweb.com:" target="_blank">www.programmableweb.com</a> has &gt;12,000 open web APIs in 63 categories).</li>
<li>Request information by calling (or, more technically speaking, creating a request to) the API (e.g., R, python, php or JavaScript).</li>
<li>Receive response messages, which is usually in JavaScript Object Notation (JSON) or Extensible Markup Language (XML) format.</li>
<li>Write a parser to pull out the elements you want and put them into a of simpler format</li>
<li>Store, process or analyze data according the marketing research question.</li>
</ul>
<p>Let’s assume that you would like to obtain population data again. The World Bank has an API that allows you to easily obtain this kind of data. The details are usually provided in the API reference, e.g., <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-api-documentation" target="_blank">here</a>. You simply “call” the API for the desired information and get a structured JSON file with the desired key-value pairs in return. For example, the population for Austria from 1960 to 2016 can be obtained using <a href="http://api.worldbank.org/countries/AT/indicators/SP.POP.TOTL/?date=1960:2016&format=json&per_page=100" target="_blank">this call</a>. The file can be easily read into R using the <code>fromJSON()</code>-function from the <code>jsonlite</code>-package. Again, the result is a list and the second element <code>ctrydata[[2]]</code> contains the desired data, from which we select the “value” and “data” columns using the square brackets as usual <code>[,c("value","date")]</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="kw">library</span>(jsonlite)</a>
<a class="sourceLine" id="cb89-2" title="2">url &lt;-<span class="st"> &quot;http://api.worldbank.org/countries/AT/indicators/SP.POP.TOTL/?date=1960:2016&amp;format=json&amp;per_page=100&quot;</span>  <span class="co">#specifies url</span></a>
<a class="sourceLine" id="cb89-3" title="3">ctrydata &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(url)  <span class="co">#parses the data </span></a>
<a class="sourceLine" id="cb89-4" title="4"><span class="kw">str</span>(ctrydata)</a></code></pre></div>
<pre><code>## List of 2
##  $ :List of 4
##   ..$ page    : int 1
##   ..$ pages   : int 1
##   ..$ per_page: chr &quot;100&quot;
##   ..$ total   : int 57
##  $ :&#39;data.frame&#39;:    57 obs. of  5 variables:
##   ..$ indicator:&#39;data.frame&#39;:    57 obs. of  2 variables:
##   .. ..$ id   : chr [1:57] &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; ...
##   .. ..$ value: chr [1:57] &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; ...
##   ..$ country  :&#39;data.frame&#39;:    57 obs. of  2 variables:
##   .. ..$ id   : chr [1:57] &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; ...
##   .. ..$ value: chr [1:57] &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; ...
##   ..$ value    : chr [1:57] &quot;8736668&quot; &quot;8642699&quot; &quot;8546356&quot; &quot;8479823&quot; ...
##   ..$ decimal  : chr [1:57] &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;0&quot; ...
##   ..$ date     : chr [1:57] &quot;2016&quot; &quot;2015&quot; &quot;2014&quot; &quot;2013&quot; ...</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="kw">head</span>(ctrydata[[<span class="dv">2</span>]][, <span class="kw">c</span>(<span class="st">&quot;value&quot;</span>, <span class="st">&quot;date&quot;</span>)])  <span class="co">#checks if we scraped the desired data</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"8736668","2":"2016"},{"1":"8642699","2":"2015"},{"1":"8546356","2":"2014"},{"1":"8479823","2":"2013"},{"1":"8429991","2":"2012"},{"1":"8391643","2":"2011"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="scraping-data-from-apis-via-r-packages" class="section level5">
<h5><span class="header-section-number">2.2.4.2.2</span> Scraping data from APIs via R packages</h5>
<p>An even more convenient way to obtain data from web APIs is to use existing R packages that someone else has already created. There are R packages available for various web-services. For example, the <code>gtrendsR</code> package can be used to conveniently obtain data from the <a href="https://trends.google.at/trends/" target="_blank">Google Trends</a> page. The <code>gtrends()</code> function is easy to use and returns a list of elements (e.g., “interest over time”, “interest by city”, “related topics”), which can be inspected using the <code>ls()</code> function. The following example can be used to obtain data for the search term “data science” in the US between September 1 and October 6:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1"><span class="kw">library</span>(gtrendsR)</a>
<a class="sourceLine" id="cb92-2" title="2">index =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb92-3" title="3">success =<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb92-4" title="4"><span class="cf">while</span> (<span class="op">!</span>(success <span class="op">|</span><span class="st"> </span>index <span class="op">==</span><span class="st"> </span><span class="dv">10</span>)) {</a>
<a class="sourceLine" id="cb92-5" title="5">    google_trends &lt;-<span class="st"> </span><span class="kw">try</span>(<span class="kw">gtrends</span>(<span class="st">&quot;data science&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;US&quot;</span>), </a>
<a class="sourceLine" id="cb92-6" title="6">        <span class="dt">gprop =</span> <span class="kw">c</span>(<span class="st">&quot;web&quot;</span>), <span class="dt">time =</span> <span class="st">&quot;2017-09-01 2017-10-06&quot;</span>), </a>
<a class="sourceLine" id="cb92-7" title="7">        <span class="dt">silent =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb92-8" title="8">    </a>
<a class="sourceLine" id="cb92-9" title="9">    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is</span>(google_trends, <span class="st">&quot;try-error&quot;</span>)) {</a>
<a class="sourceLine" id="cb92-10" title="10">        <span class="kw">ls</span>(google_trends)</a>
<a class="sourceLine" id="cb92-11" title="11">        <span class="kw">head</span>(google_trends<span class="op">$</span>interest_over_time)</a>
<a class="sourceLine" id="cb92-12" title="12">        success =<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb92-13" title="13">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb92-14" title="14">        index =<span class="st"> </span>index <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb92-15" title="15">        <span class="kw">Sys.sleep</span>(<span class="kw">runif</span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb92-16" title="16">    }</a>
<a class="sourceLine" id="cb92-17" title="17">}</a>
<a class="sourceLine" id="cb92-18" title="18"><span class="cf">if</span> (success <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb92-19" title="19">    <span class="kw">warning</span>(<span class="st">&quot;Google Trends has exited unsuccessfully&quot;</span>)</a>
<a class="sourceLine" id="cb92-20" title="20">}</a></code></pre></div>

</div>
</div>
</div>
</div>
<div id="summarizing-data" class="section level2">
<h2><span class="header-section-number">2.3</span> Summarizing data</h2>
<div id="summary-statistics" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Summary statistics</h3>
<p>This section discusses how to produce and analyse basic summary statistics. We make a distinction between categorical and continuous variables, for which different statistics are permissible.</p>
<p><a href="./Code/04-basic_statistics%20(1).R">You can download the corresponding R-Code here</a></p>
<p><br>
<br></p>
<table>
<thead>
<tr class="header">
<th>OK to compute….</th>
<th>Nominal</th>
<th>Ordinal</th>
<th>Interval</th>
<th>Ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>frequency distribution</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>median and percentiles</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>mean, standard deviation, standard error of the mean</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>ratio, or coefficient of variation</td>
<td>No</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>As an example data set, we will be using the Spotify music data. Let’s load and inspect the data first. Students of the course can get the data via Learn@WU. If you are not enrolled in the course please contact <a href="https://www.wu.ac.at/en/imsm/about-us/team/daniel-winkler">Daniel Winkler</a> (<a href="https://www.wu.ac.at/en/imsm/about-us/team/daniel-winkler" class="uri">https://www.wu.ac.at/en/imsm/about-us/team/daniel-winkler</a>).</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="kw">readRDS</span>(<span class="st">&quot;music_data.rds&quot;</span>)</a></code></pre></div>
</div>
<div id="categorical-variables" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Categorical variables</h3>
<p>Categorical variables contain a finite number of categories or distinct groups and are also known as qualitative variables. There are different types of categorical variables:</p>
<ul>
<li><strong>Nominal variables</strong>: variables that have two or more categories but no logical order (e.g., music genres). A dichotomous variables is simply a nominal variable that only has two categories (e.g., gender).</li>
<li><strong>Ordinal variables</strong>: variables that have two or more categories that can also be ordered or ranked (e.g., income groups).</li>
</ul>
<p>For this example, we are interested in the following two variables</p>
<ul>
<li>“genre”: the music genre the song is associated with, subsetted for the most frequent genres.<br />
</li>
<li>“explicit”: whether the lyrics of the tracks are explicit or not (0 = not explicit, 1 = explicit)</li>
</ul>
<p><a href="https://developer.spotify.com/documentation/web-api/reference/personalization/get-users-top-artists-and-tracks/">You can find a full description of the variables here:</a></p>
<p>In a first step, we convert the variables to factor variables using the <code>factor()</code> function to assign appropriate labels according to the scale points:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1">s.genre &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;pop&quot;</span>, <span class="st">&quot;hip hop&quot;</span>, <span class="st">&quot;rock&quot;</span>, <span class="st">&quot;rap&quot;</span>, <span class="st">&quot;indie&quot;</span>)</a>
<a class="sourceLine" id="cb94-2" title="2">music_data &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, top.genre <span class="op">%in%</span><span class="st"> </span>s.genre)</a>
<a class="sourceLine" id="cb94-3" title="3"></a>
<a class="sourceLine" id="cb94-4" title="4">music_data<span class="op">$</span>genre_cat &lt;-<span class="st"> </span><span class="kw">as.factor</span>(music_data<span class="op">$</span>top.genre)</a>
<a class="sourceLine" id="cb94-5" title="5">music_data<span class="op">$</span>explicit_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(music_data<span class="op">$</span>explicit, </a>
<a class="sourceLine" id="cb94-6" title="6">    <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;not explicit&quot;</span>, <span class="st">&quot;explicit&quot;</span>))</a></code></pre></div>
<p>The <code>table()</code> function creates a frequency table. Let’s start with the number of occurrences of the categories associated with the genre and explicitness variables separately:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>)])  <span class="co">#absolute frequencies</span></a></code></pre></div>
<pre><code>## 
## hip hop   indie     pop     rap    rock 
##    9907     528   28448    1180    1839</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;explicit_cat&quot;</span>)])  <span class="co">#absolute frequencies</span></a></code></pre></div>
<pre><code>## 
## not explicit     explicit 
##        30204        11698</code></pre>
<p>It is obvious that there are more tracks with non-explicit lyrics than songs with explicit lyrics. For variables with more categories, it might be less obvious and we might use the <code>summary()</code> function, which produces further statistics.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">summary</span>(music_data<span class="op">$</span>explicit)</a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.0000  0.0000  0.0000  0.2792  1.0000  1.0000</code></pre>
<p>Often, we are interested in the relative frequencies, which can be obtained by using the <code>prop.table()</code> function.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1"><span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>)]))  <span class="co">#relative frequencies</span></a></code></pre></div>
<pre><code>## 
##    hip hop      indie        pop        rap       rock 
## 0.23643263 0.01260083 0.67891747 0.02816095 0.04388812</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;explicit_cat&quot;</span>)]))  <span class="co">#relative frequencies</span></a></code></pre></div>
<pre><code>## 
## not explicit     explicit 
##    0.7208248    0.2791752</code></pre>
<p>Now let’s investigate if the genre differs by expliciteness. To do this, we simply apply the <code>table()</code> function to both variables:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>, <span class="st">&quot;explicit_cat&quot;</span>)])  <span class="co">#absolute frequencies</span></a></code></pre></div>
<pre><code>##          explicit_cat
## genre_cat not explicit explicit
##   hip hop         3515     6392
##   indie            495       33
##   pop            23881     4567
##   rap              536      644
##   rock            1777       62</code></pre>
<p>Again, it might be more meaningful to look at the relative frequencies using <code>prop.table()</code>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>, <span class="st">&quot;explicit_cat&quot;</span>)]))  <span class="co">#relative frequencies</span></a></code></pre></div>
<pre><code>##          explicit_cat
## genre_cat not explicit     explicit
##   hip hop 0.0838862107 0.1525464178
##   indie   0.0118132786 0.0007875519
##   pop     0.5699250632 0.1089924109
##   rap     0.0127917522 0.0153691948
##   rock    0.0424084769 0.0014796430</code></pre>
<p>Note that the above output shows the overall relative frequencies when explicit and non-explicit songs are considered together. In this context, it might be even more meaningful to look at the conditional relative frequencies. This can be achieved by adding a <code>,2</code> to the <code>prop.table()</code> command, which tells R to compute the relative frequencies by the columns (which is in our case the explicitness variable):</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1"><span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>, <span class="st">&quot;explicit_cat&quot;</span>)]), </a>
<a class="sourceLine" id="cb109-2" title="2">    <span class="dv">2</span>)  <span class="co">#conditional relative frequencies</span></a></code></pre></div>
<pre><code>##          explicit_cat
## genre_cat not explicit    explicit
##   hip hop  0.116375315 0.546418191
##   indie    0.016388558 0.002820995
##   pop      0.790656867 0.390408617
##   rap      0.017745994 0.055052146
##   rock     0.058833267 0.005300051</code></pre>
</div>
<div id="continuous-variables" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Continuous variables</h3>
<div id="descriptive-statistics" class="section level4">
<h4><span class="header-section-number">2.3.3.1</span> Descriptive statistics</h4>
<p>Continuous variables are numeric variables that can take on any value on a measurement scale (i.e., there is an infinite number of values between any two values). There are different types of continuous variables:</p>
<ul>
<li><strong>Interval variables</strong>: while the zero point is arbitrary, equal intervals on the scale represent equal differences in the property being measured. E.g., on a temperature scale measured in Celsius the difference between a temperature of 15 degrees and 25 degrees is the same difference as between 25 degrees and 35 degrees but the zero point is arbitrary.</li>
<li><strong>Ratio variables</strong>: has all the properties of an interval variable, but also has an absolute zero point. When the variable equals 0.0, it means that there is none of that variable (e.g., number of products sold, willingness-to-pay, mileage a car gets).</li>
</ul>
<p>Computing descriptive statistics in R is easy and there are many functions from different packages that let you calculate summary statistics (including the <code>summary()</code> function from the <code>base</code> package). In this tutorial, we will use the <code>describe()</code> function from the <code>psych</code> package:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1"><span class="kw">library</span>(psych)</a>
<a class="sourceLine" id="cb111-2" title="2">psych<span class="op">::</span><span class="kw">describe</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;trackPopularity&quot;</span>, <span class="st">&quot;adv_spending&quot;</span>)])</a></code></pre></div>
<pre><code>##                 vars     n
## trackPopularity    1 41902
## adv_spending       2  4040
##                                                                                                                                               mean
## trackPopularity                                                                                                                              42.19
## adv_spending    1663861998635444585864660260688462026284468864886868800400000020666246064046406880460444442648428028400888480624606802446648462.00
##                                                                                                                                                  sd
## trackPopularity                                                                                                                               21.93
## adv_spending    90388285514975490272066062808820264664064864422680884046048626228244806868224402226006028280800280668666884600660462844420680206.00
##                                                                                                                        median
## trackPopularity                                                                                                            46
## adv_spending    8053950811694375076824220644028800608248284086666028464048828228006660620820828880242228286408806068846024408
##                                                                                                                              trimmed
## trackPopularity                                                                                                                43.32
## adv_spending    14312549466936196761806428408484466468620480282082282286280486284822888446868028488606224824666482262266668626842.00
##                                                                                                                               mad
## trackPopularity                                                                                                             20.76
## adv_spending    11939965425569067044240608664628240664888648202888200686468420040206040640028804088064882662868044284048420448.00
##                                                                                                                     min
## trackPopularity                                                                                                       0
## adv_spending    1646831944677300010820268680266002882604028246422824284022206004886802080242644444040688280646822624480
##                                                                                                                                                max
## trackPopularity                                                                                                                                100
## adv_spending    5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088
##                                                                                                                                              range
## trackPopularity                                                                                                                                100
## adv_spending    5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088
##                  skew kurtosis
## trackPopularity -0.46    -0.57
## adv_spending      NaN      NaN
##                                                                                                                                                 se
## trackPopularity                                                                                                                               0.11
## adv_spending    1422071609643704026248808408402486088228688260604604220224028206488622082266424600242426662026480460228620048046260406648868826.00</code></pre>
<p>In the above command, we used the <code>psych::</code> prefix to avoid confusion and to make sure that R uses the <code>describe()</code> function from the <code>psych</code> package since there are many other packages that also contain a <code>desribe()</code> function. Note that you could also compute these statistics separately by using the respective functions (e.g., <code>mean()</code>, <code>sd()</code>, <code>median()</code>, <code>min()</code>, <code>max()</code>, etc.).</p>
<p>The <code>psych</code> package also contains the <code>describeBy()</code> function, which lets you compute the summary statistics by sub-group separately. For example, we could easily compute the summary statistics by expliciteness as follows:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1"><span class="kw">describeBy</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;trackPopularity&quot;</span>, <span class="st">&quot;adv_spending&quot;</span>)], </a>
<a class="sourceLine" id="cb113-2" title="2">    music_data<span class="op">$</span>explicit_cat)</a></code></pre></div>
<pre><code>## 
##  Descriptive statistics by group 
## group: not explicit
##                 vars     n
## trackPopularity    1 30204
## adv_spending       2  1615
##                                                                                                                                            mean
## trackPopularity                                                                                                                           41.08
## adv_spending    5172168603099718433868604246064088062000622848824280466240028020600844888242840248826224668440204624688828682200042666080242.00
##                                                                                                                                                sd
## trackPopularity                                                                                                                             21.48
## adv_spending    193381855610632447548048442804406800884668248242842662804404622280662222808848600424280062888084668480262200268026240204842464.00
##                                                                                                                        median
## trackPopularity                                                                                                            44
## adv_spending    2559156059025929784004482022426466082064262628220844882664802660886428020680422262882480488080644044628486828
##                                                                                                                             trimmed
## trackPopularity                                                                                                               42.02
## adv_spending    1552391850272417551362648042888222620028806244886000864288042262046042248200486668446466886686002486624468882868.00
##                                                                                                                              mad
## trackPopularity                                                                                                            20.76
## adv_spending    3793573264280055574086482668422244808220406040466602626626446420208648600424840064620682648684888260642264064.00
##                                                                                                                     min
## trackPopularity                                                                                                       0
## adv_spending    1788886480907749967842682060026620206264080660240020228042084020228244440224062020262428844602266660446
##                                                                                                                                             max
## trackPopularity                                                                                                                             100
## adv_spending    7764099326969320378608066060660280002440444644648488206608682426802602084088442262008068682600808860064864804286020246020262688
##                                                                                                                                           range
## trackPopularity                                                                                                                             100
## adv_spending    7764099326969320378608066060660280002440444644648488206608682426802602084088442262008068682600808860064864804286020246020262688
##                  skew kurtosis
## trackPopularity -0.39    -0.61
## adv_spending      NaN      NaN
##                                                                                                                                              se
## trackPopularity                                                                                                                            0.12
## adv_spending    4812042561069334414664660000428420880204200644640686468404424602468822644684422860446848482446826206804042464826084064004002.00
## ------------------------------------------------------------ 
## group: explicit
##                 vars     n
## trackPopularity    1 11698
## adv_spending       2  2425
##                                                                                                                                               mean
## trackPopularity                                                                                                                              45.07
## adv_spending    2768515225646676246664844868822828062206488628822664880400206008226266480244844042466044464884204446662204680282662644202688428.00
##                                                                                                                                                   sd
## trackPopularity                                                                                                                                22.81
## adv_spending    116663137947801986778808684624800464202640242000064264666668202684086864648860006684800466646288846802668622088262444068402646408.00
##                                                                                                                         median
## trackPopularity                                                                                                             50
## adv_spending    16277273105159300289026820224460020262060482644664282466244864426284648608824800242648608084004806044668800220
##                                                                                                                              trimmed
## trackPopularity                                                                                                                46.71
## adv_spending    56023009135510243082282602606886224080402226420826642640426048268642644004000844864660228228640660488886220420022.00
##                                                                                                                               mad
## trackPopularity                                                                                                             19.27
## adv_spending    24131787940269998252880040640022280064468806080286684840628468640280864662242224628046684284048684000002606680.00
##                                                                                                                     min
## trackPopularity                                                                                                       0
## adv_spending    1646831944677300010820268680266002882604028246422824284022206004886802080242644444040688280646822624480
##                                                                                                                                                max
## trackPopularity                                                                                                                                 98
## adv_spending    5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088
##                                                                                                                                              range
## trackPopularity                                                                                                                                 98
## adv_spending    5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088
##                  skew kurtosis
## trackPopularity -0.67    -0.38
## adv_spending      NaN      NaN
##                                                                                                                                                 se
## trackPopularity                                                                                                                               0.21
## adv_spending    2369069394555102609600884202408886468886424206008026200000206624606024880800882680484800028888404802684848600808400464082024620.00</code></pre>
<p>Note that you could just as well use other packages to compute the descriptive statistics. For example, you could have used the <code>stat.desc()</code> function from the <code>pastecs</code> package:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1"><span class="kw">library</span>(pastecs)</a>
<a class="sourceLine" id="cb115-2" title="2"><span class="kw">stat.desc</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;trackPopularity&quot;</span>, <span class="st">&quot;adv_spending&quot;</span>)])</a></code></pre></div>
<pre><code>##              trackPopularity
## nbr.val        41902.0000000
## nbr.null        2718.0000000
## nbr.na             0.0000000
## min                0.0000000
## max              100.0000000
## range            100.0000000
## sum          1767874.0000000
## median            46.0000000
## mean              42.1906830
## SE.mean            0.1071435
## CI.mean.0.95       0.2100034
## var              481.0231842
## std.dev           21.9322407
## coef.var           0.5198361
##                                                                                                                                                                                                                                                                        adv_spending
## nbr.val                                                                                                                                                                                                                                                                  4040.00000
## nbr.null                                                                                                                                                                                                                                                                    0.00000
## nbr.na                                                                                                                                                                                                                                                                  37862.00000
## min                                                                                                                                                                   1646831944677300010820268680266002882604028246422824284022206004886802080242644444040688280646822624480.00000
## max                                                                                                                                        5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088.00000
## range                                                                                                                                      5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088.00000
## sum                                                                                                                                        6722002474487196115462426822242400844448880204206868482048848046246648268064886808000808046060040048844846680068068466424224426060.00000
## median                                                                                                                                                          8053950811694375076824220644028800608248284086666028464048828228006660620820828880242228286408806068846024408.00000
## mean                                                                                                                                          1663861998635444585864660260688462026284468864886868800400000020666246064046406880460444442648428028400888480624606802446648462.00000
## SE.mean                                                                                                                                       1422071609643704026248808408402486088228688260604604220224028206488622082266424600242426662026480460228620048046260406648868826.00000
## CI.mean.0.95                                                                                                                                  2788044625723915458440280804248280446226200648080068026202266888604008082082024644246800284602662006644644280220666026224268022.00000
## var          8170042158336727986426242460866406822204024804824644484880608220248804860680022646662204820440068848888662048688266026064082600880440008082046688286608024028260888406880688808486846600208064862462006042262042284880482428086828620828202448820244862648640620.00000
## std.dev                                                                                                                                      90388285514975490272066062808820264664064864422680884046048626228244806868224402226006028280800280668666884600660462844420680206.00000
## coef.var                                                                                                                                                                                                                                                                   54.32439</code></pre>
<p>Computing statistics by group is also possible by using the wrapper function <code>by()</code>. Within the function, you first specify the data on which you would like to perform the grouping <code>music_data[,c("trackPopularity", "adv_spending")]</code>, followed by the grouping variable <code>music_data$explicit_cat</code> and the function that you would like to execute (e.g., <code>stat.desc()</code>):</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1"><span class="kw">library</span>(pastecs)</a>
<a class="sourceLine" id="cb117-2" title="2"><span class="kw">by</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;trackPopularity&quot;</span>, <span class="st">&quot;adv_spending&quot;</span>)], </a>
<a class="sourceLine" id="cb117-3" title="3">    music_data<span class="op">$</span>explicit_cat, stat.desc)</a></code></pre></div>
<pre><code>## music_data$explicit_cat: not explicit
##              trackPopularity
## nbr.val        30204.0000000
## nbr.null        1777.0000000
## nbr.na             0.0000000
## min                0.0000000
## max              100.0000000
## range            100.0000000
## sum          1240696.0000000
## median            44.0000000
## mean              41.0772083
## SE.mean            0.1235926
## CI.mean.0.95       0.2422467
## var              461.3697298
## std.dev           21.4795188
## coef.var           0.5229060
##                                                                                                                                                                                                                                                                   adv_spending
## nbr.val                                                                                                                                                                                                                                                             1615.00000
## nbr.null                                                                                                                                                                                                                                                               0.00000
## nbr.na                                                                                                                                                                                                                                                             28589.00000
## min                                                                                                                                                              1788886480907749967842682060026620206264080660240020228042084020228244440224062020262428844602266660446.00000
## max                                                                                                                                      7764099326969320378608066060660280002440444644648488206608682426802602084088442262008068682600808860064864804286020246020262688.00000
## range                                                                                                                                    7764099326969320378608066060660280002440444644648488206608682426802602084088442262008068682600808860064864804286020246020262688.00000
## sum                                                                                                                                      8353052294006045667002204800400024024444668206822248006068684462066840068224428664024024220422028248268604480480846062402280426.00000
## median                                                                                                                                                     2559156059025929784004482022426466082064262628220844882664802660886428020680422262882480488080644044628486828.00000
## mean                                                                                                                                        5172168603099718433868604246064088062000622848824280466240028020600844888242840248826224668440204624688828682200042666080242.00000
## SE.mean                                                                                                                                     4812042561069334414664660000428420880204200644640686468404424602468822644684422860446848482446826206804042464826084064004002.00000
## CI.mean.0.95                                                                                                                                9438508110504072854822466804204844860000246666660288644460424606680006280246682048842004802286666800662802446400402044444248.00000
## var          37396542079411498136442264686806804444080042428888408206086244840484246468804804400686408468808088222020824880248682868646668402400880626022486806284026026220446622848020288282848446028460000402822604860802020400662002480086688460026044200400240886222.00000
## std.dev                                                                                                                                   193381855610632447548048442804406800884668248242842662804404622280662222808848600424280062888084668480262200268026240204842464.00000
## coef.var                                                                                                                                                                                                                                                              37.38893
## ------------------------------------------------------------ 
## music_data$explicit_cat: explicit
##              trackPopularity
## nbr.val        11698.0000000
## nbr.null         941.0000000
## nbr.na             0.0000000
## min                0.0000000
## max               98.0000000
## range             98.0000000
## sum           527178.0000000
## median            50.0000000
## mean              45.0656522
## SE.mean            0.2109063
## CI.mean.0.95       0.4134115
## var              520.3441548
## std.dev           22.8110533
## coef.var           0.5061738
##                                                                                                                                                                                                                                                                         adv_spending
## nbr.val                                                                                                                                                                                                                                                                   2425.00000
## nbr.null                                                                                                                                                                                                                                                                     0.00000
## nbr.na                                                                                                                                                                                                                                                                    9273.00000
## min                                                                                                                                                                    1646831944677300010820268680266002882604028246422824284022206004886802080242644444040688280646822624480.00000
## max                                                                                                                                         5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088.00000
## range                                                                                                                                       5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088.00000
## sum                                                                                                                                         6713649422193189932662244044402280060444460004662046400864482628466284226860884622426628208882688002822480480466866202268460824806.00000
## median                                                                                                                                                          16277273105159300289026820224460020262060482644664282466244864426284648608824800242648608084004806044668800220.00000
## mean                                                                                                                                           2768515225646676246664844868822828062206488628822664880400206008226266480244844042466044464884204446662204680282662644202688428.00000
## SE.mean                                                                                                                                        2369069394555102609600884202408886468886424206008026200000206624606024880800882680484800028888404802684848600808400464082024620.00000
## CI.mean.0.95                                                                                                                                   4645610341497686697604402446408802206004066886604642460280880026606484282668626000246480206666082624288806844468224464068424888.00000
## var          13610287755827875789244684862662422006402646266646820408624444604868480640846602268868862688028288826620420804686842248682262424444228282208406066802002242860600668680600240880684826224820062846086642608280864008620604008264404666220644204260828488680024242.00000
## std.dev                                                                                                                                      116663137947801986778808684624800464202640242000064264666668202684086864648860006684800466646288846802668622088262444068402646408.00000
## coef.var                                                                                                                                                                                                                                                                    42.13924</code></pre>
<p>These examples are meant to exemplify that there are often many different ways to reach a goal in R. Which one you choose depends on what type of information you seek (the results provide slightly different information) and on personal preferences.</p>
</div>
<div id="creating-subsets" class="section level4">
<h4><span class="header-section-number">2.3.3.2</span> Creating subsets</h4>
<p>From the above statistics it is clear that the data set contains some severe outliers on some variables. For example, the maximum amount of spending on advertisment is 5656214468105729405828064024244626288440286026462602464624682088600200684844462024286662620424466002028202460884442000822886640088 units. You might want to investigate these cases and delete them if they would turn out to indeed induce a bias in your analyses. For normally distributed data, any absolute standardized deviations larger than 3 standard deviations from the mean are suspicious. Let’s check if potential outliers exist in the data:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" title="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb119-2" title="2">music_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">adv_spending_std =</span> <span class="kw">as.vector</span>(<span class="kw">scale</span>(adv_spending))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb119-3" title="3"><span class="st">    </span><span class="kw">filter</span>(<span class="kw">abs</span>(adv_spending_std) <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(id, </a>
<a class="sourceLine" id="cb119-4" title="4">    trackName, adv_spending, adv_spending_std)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   id                     trackName      adv_spending adv_spending_std
##   &lt;chr&gt;                  &lt;chr&gt;                 &lt;dbl&gt;            &lt;dbl&gt;
## 1 0bAkKNCQfWkexHFn7fIKns In My Feelings     5.66e129             62.6
## 2 14msK75pk3pA33pzPVNtBF 7 rings            1.01e129             11.1</code></pre>
<p>Indeed, there appear to be two potential outliers, which we may wish to exclude before we start fitting models to the data. You could easily create a subset of the original data, which you would then use for estimation using the <code>filter()</code> function from the <code>dplyr()</code> package. For example, the following code creates a subset that excludes all cases with a standardized duration of more than 3:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb121-2" title="2">estimation_sample &lt;-<span class="st"> </span>music_data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">adv_spending_std =</span> <span class="kw">as.vector</span>(<span class="kw">scale</span>(adv_spending))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb121-3" title="3"><span class="st">    </span><span class="kw">filter</span>(<span class="kw">abs</span>(adv_spending_std) <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb121-4" title="4">psych<span class="op">::</span><span class="kw">describe</span>(estimation_sample[, <span class="kw">c</span>(<span class="st">&quot;trackPopularity&quot;</span>, </a>
<a class="sourceLine" id="cb121-5" title="5">    <span class="st">&quot;adv_spending&quot;</span>)])</a></code></pre></div>
<pre><code>##                 vars    n
## trackPopularity    1 4038
## adv_spending       2 4038
##                                                                                                                                            mean
## trackPopularity                                                                                                                            56.1
## adv_spending    14299852780120468658622482802848688022022202086864448642626600820000280600626684244282008840020428048840648260602646622668286.0
##                                                                                                                                                sd
## trackPopularity                                                                                                                             25.75
## adv_spending    514033938921804019002488846802888248668040446468262062844642024226602224642842040868260448620288000604400000664604642028642226.00
##                                                                                                                        median
## trackPopularity                                                                                                            65
## adv_spending    7953461129902340059228042402608068020640264468662402680228846066802824020248060428622884846426026448862868664
##                                                                                                                              trimmed
## trackPopularity                                                                                                                59.04
## adv_spending    14094605684355323876048228642822626462688640266288242422280868000064822200624482664266062826424266688464088022462.00
##                                                                                                                               mad
## trackPopularity                                                                                                             16.31
## adv_spending    11790995100996427476088882220022060444686420224680264804644084486020226464822268088668022620086008640042682204.00
##                                                                                                                     min
## trackPopularity                                                                                                       0
## adv_spending    1646831944677300010820268680266002882604028246422824284022206004886802080242644444040688280646822624480
##                                                                                                                                              max
## trackPopularity                                                                                                                              100
## adv_spending    23007897832533398424040864022022246400486882884608260204820068628844468640026482428664888646426064488804840446284886200602688268
##                                                                                                                                            range
## trackPopularity                                                                                                                              100
## adv_spending    23007897832533398424040864022022246400486882884608260204820068628844468640026482428664888646426064488804840446284886200602688268
##                  skew kurtosis
## trackPopularity -0.98    -0.27
## adv_spending      NaN      NaN
##                                                                                                                                              se
## trackPopularity                                                                                                                            0.41
## adv_spending    8089257063071855260060206620482246260642442880466824482666082666888844020880402822068626224048886806064888628468088082842064.00</code></pre>

</div>
</div>
</div>
<div id="data-visualization" class="section level2">
<h2><span class="header-section-number">2.4</span> Data visualization</h2>
<p>This section discusses how to produce appropriate graphics to describe our data visually. While R includes tools to build plots, we will be using the ggplot2 package by Hadley Wickham. It has the advantage of being fairly straightforward to learn but being very flexible when it comes to building more complex plots. For a more in depth discussion you can refer to chapter 4 of the book “Discovering Statistics Using R” by Andy Field et al. or read the following chapter from the book <a href="http://r4ds.had.co.nz/data-visualisation.html" target="_blank">“R for Data science”</a> by Hadley Wickham as well as <a href="https://r-graphics.org/" target="_blank">“R Graphics Cookbook”</a> by Winston Chang.</p>
<p><a href="./Code/05-visualization%20(1).R">You can download the corresponding R-Code here</a></p>
<p>ggplot2 is built around the idea of constructing plots by stacking layers on top of one another. Every plot starts with the <code>ggplot(data)</code> function, after which layers can be added with the “+” symbol. The following figures show the layered structure of creating plots with ggplot.</p>
<p style="text-align:center;">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/ggplot2.JPG" alt="DSUR cover" height="250"  />   
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/ggplot1.JPG" alt="DSUR cover" height="250"  />
</p>
<div id="categorical-variables-1" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Categorical variables</h3>
<div id="bar-plot" class="section level4">
<h4><span class="header-section-number">2.4.1.1</span> Bar plot</h4>
<p>To give you an example of how the graphics are composed, let’s go back to the frequency table from the previous chapter, where we created this table:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="kw">readRDS</span>(<span class="st">&quot;music_data.rds&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1">s.genre &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;pop&quot;</span>, <span class="st">&quot;hip hop&quot;</span>, <span class="st">&quot;rock&quot;</span>, <span class="st">&quot;rap&quot;</span>, <span class="st">&quot;indie&quot;</span>)</a>
<a class="sourceLine" id="cb124-2" title="2">music_data &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, top.genre <span class="op">%in%</span><span class="st"> </span>s.genre)</a>
<a class="sourceLine" id="cb124-3" title="3"></a>
<a class="sourceLine" id="cb124-4" title="4">music_data<span class="op">$</span>genre_cat &lt;-<span class="st"> </span><span class="kw">as.factor</span>(music_data<span class="op">$</span>top.genre)</a>
<a class="sourceLine" id="cb124-5" title="5">music_data<span class="op">$</span>explicit_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(music_data<span class="op">$</span>explicit, </a>
<a class="sourceLine" id="cb124-6" title="6">    <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;not explicit&quot;</span>, <span class="st">&quot;explicit&quot;</span>))</a>
<a class="sourceLine" id="cb124-7" title="7"></a>
<a class="sourceLine" id="cb124-8" title="8"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["trackName"],"name":[2],"type":["chr"],"align":["left"]},{"label":["isrc"],"name":[3],"type":["chr"],"align":["left"]},{"label":["explicit"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["trackPopularity"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["primary_artistName"],"name":[6],"type":["chr"],"align":["left"]},{"label":["primary_artistID"],"name":[7],"type":["chr"],"align":["left"]},{"label":["artistName"],"name":[8],"type":["chr"],"align":["left"]},{"label":["artistIDs"],"name":[9],"type":["chr"],"align":["left"]},{"label":["albumName"],"name":[10],"type":["chr"],"align":["left"]},{"label":["albumID"],"name":[11],"type":["chr"],"align":["left"]},{"label":["available_markets"],"name":[12],"type":["chr"],"align":["left"]},{"label":["n_available_markets"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["releaseDate"],"name":[14],"type":["date"],"align":["right"]},{"label":["releaseDate_precision"],"name":[15],"type":["chr"],"align":["left"]},{"label":["danceability"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["energy"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["key"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["loudness"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["mode"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["speechiness"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["acousticness"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["instrumentalness"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["liveness"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["valence"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["tempo"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["duration_ms"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["time_signature"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["uri"],"name":[29],"type":["chr"],"align":["left"]},{"label":["analysis_url"],"name":[30],"type":["chr"],"align":["left"]},{"label":["followers"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["type"],"name":[32],"type":["chr"],"align":["left"]},{"label":["popularity"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["primary_genre"],"name":[34],"type":["chr"],"align":["left"]},{"label":["genres"],"name":[35],"type":["chr"],"align":["left"]},{"label":["n_genres"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["total_releases"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["n_album"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["n_single"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["n_appears_on"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["n_compilation"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["mstreams"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["region"],"name":[43],"type":["chr"],"align":["left"]},{"label":["adv_spending"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["top.genre"],"name":[45],"type":["chr"],"align":["left"]},{"label":["genre_cat"],"name":[46],"type":["fctr"],"align":["left"]},{"label":["explicit_cat"],"name":[47],"type":["fctr"],"align":["left"]}],"data":[{"1":"5aAx2yezTd8zXrkmtKl66Z","2":"Starboy","3":"USUG11600976","4":"1","5":"22","6":"The Weeknd","7":"1Xyo4u8uXC1ZmMpatF05PJ","8":"The Weeknd feat. Daft Punk","9":"1Xyo4u8uXC1ZmMpatF05PJ,4tZwfgrHOc3mvqYlEYSvVi","10":"Starboy","11":"09fggMHib4YkOtwQNXEBII","12":"NA","13":"0","14":"2016-11-25","15":"day","16":"0.681","17":"0.594","18":"7","19":"-7.028","20":"1","21":"0.2820","22":"0.1650","23":"0.00000349","24":"0.134","25":"0.535","26":"186.054","27":"230453","28":"4","29":"spotify:track:5aAx2yezTd8zXrkmtKl66Z","30":"https://api.spotify.com/v1/audio-analysis/5aAx2yezTd8zXrkmtKl66Z","31":"15222808","32":"artist","33":"91","34":"canadian contemporary r&b","35":"canadian contemporary r&b, canadian pop, pop, rap","36":"4","37":"124","38":"13","39":"20","40":"91","41":"0","42":"357336.0","43":"us","44":"4538745582809720084484024442860668048880048662828002246462622248860488860200660880246202488046088200066826842264","45":"pop","46":"pop","47":"explicit"},{"1":"7BKLCZ1jbUBVqRi2FVlTVw","2":"Closer","3":"USQX91601347","4":"0","5":"86","6":"The Chainsmokers","7":"69GGBxA162lTqCwzJG5jLp","8":"The Chainsmokers feat. Halsey","9":"69GGBxA162lTqCwzJG5jLp,26VFTg2z8YR0cCuwLzESi2","10":"Closer","11":"0rSLgV8p5FzfnqlEk4GzxE","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IN, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"79","14":"2016-07-29","15":"day","16":"0.748","17":"0.524","18":"8","19":"-5.599","20":"1","21":"0.0338","22":"0.4140","23":"0.00000000","24":"0.111","25":"0.661","26":"95.010","27":"244960","28":"4","29":"spotify:track:7BKLCZ1jbUBVqRi2FVlTVw","30":"https://api.spotify.com/v1/audio-analysis/7BKLCZ1jbUBVqRi2FVlTVw","31":"11565104","32":"artist","33":"90","34":"dance pop","35":"dance pop, electropop, pop, tropical house","36":"4","37":"96","38":"2","39":"59","40":"35","41":"0","42":"323081.4","43":"us","44":"87296125002616694832882460600060208466800848806624260244862640444286060866044600806284802800064402066048406208","45":"pop","46":"pop","47":"not explicit"},{"1":"4pdPtRcBmOSQDlJ3Fk945m","2":"Let Me Love You","3":"QMZSY1600015","4":"0","5":"27","6":"DJ Snake","7":"540vIaP2JwjQb9dm3aArA4","8":"DJ Snake feat. Justin Bieber","9":"540vIaP2JwjQb9dm3aArA4,1uNFoZAHBGtllmzznpCI3s","10":"Encore","11":"55bbXORm6ZrVq52zfZnxBf","12":"NA","13":"0","14":"2016-08-05","15":"day","16":"0.476","17":"0.718","18":"8","19":"-5.309","20":"1","21":"0.0576","22":"0.0784","23":"0.00000000","24":"0.122","25":"0.142","26":"199.864","27":"205947","28":"4","29":"spotify:track:4pdPtRcBmOSQDlJ3Fk945m","30":"https://api.spotify.com/v1/audio-analysis/4pdPtRcBmOSQDlJ3Fk945m","31":"4345960","32":"artist","33":"86","34":"dance pop","35":"dance pop, edm, electronic trap, pop, tropical house","36":"5","37":"85","38":"2","39":"38","40":"45","41":"0","42":"264546.4","43":"us","44":"4052673829394860012068608242402620220642222464600242282482886024464808420264228282600202608242446606420002080","45":"pop","46":"pop","47":"not explicit"},{"1":"5knuzwU65gJK7IF5yJsuaW","2":"Rockabye (feat. Sean Paul & Anne-Marie)","3":"GBAHS1600363","4":"0","5":"81","6":"Clean Bandit","7":"6MDME20pz9RveH9rEXvrOM","8":"Clean Bandit feat. Sean Paul feat. Anne-Marie","9":"6MDME20pz9RveH9rEXvrOM,3Isy6kedDrgPYoTS1dazA9,1zNqDE7qDGCsyzJwohVaoX","10":"Rockabye (feat. Sean Paul & Anne-Marie)","11":"3meZFplbMmji648oWUNEfQ","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"78","14":"2016-10-21","15":"day","16":"0.720","17":"0.763","18":"9","19":"-4.068","20":"0","21":"0.0523","22":"0.4060","23":"0.00000000","24":"0.180","25":"0.742","26":"101.965","27":"251088","28":"4","29":"spotify:track:5knuzwU65gJK7IF5yJsuaW","30":"https://api.spotify.com/v1/audio-analysis/5knuzwU65gJK7IF5yJsuaW","31":"2504254","32":"artist","33":"84","34":"dance pop","35":"dance pop, edm, pop, tropical house, uk funky","36":"5","37":"97","38":"2","39":"73","40":"22","41":"0","42":"299399.5","43":"us","44":"63076779883569398412860000868482028288628844246244082246422600040886402246824442664406842200224602284406228008","45":"pop","46":"pop","47":"not explicit"},{"1":"1xznGGDReH1oQq0xzbwXa3","2":"One Dance","3":"USCM51600028","4":"0","5":"25","6":"Drake","7":"3TVXtAsR1Inumwj472S9r4","8":"Drake feat. WizKid feat. Kyla","9":"3TVXtAsR1Inumwj472S9r4,3tVQdUvClmAT7URs9V3rsp,77DAFfvm3O9zT5dIoG0eIO","10":"Views","11":"3hARKC8cinq3mZLLAEaBh9","12":"NA","13":"0","14":"2016-05-06","15":"day","16":"0.791","17":"0.619","18":"1","19":"-5.886","20":"1","21":"0.0532","22":"0.0078","23":"0.00420000","24":"0.351","25":"0.371","26":"103.989","27":"173987","28":"4","29":"spotify:track:1xznGGDReH1oQq0xzbwXa3","30":"https://api.spotify.com/v1/audio-analysis/1xznGGDReH1oQq0xzbwXa3","31":"35200192","32":"artist","33":"98","34":"canadian hip hop","35":"canadian hip hop, canadian pop, hip hop, pop rap, rap","36":"5","37":"403","38":"27","39":"37","40":"339","41":"0","42":"265877.0","43":"us","44":"4668617894331640150824284686604420280424480024404060860488826264282200468808642628046046820200280026606226842","45":"pop","46":"pop","47":"not explicit"},{"1":"343YBumqHu19cGoGARUTsd","2":"Fake Love","3":"USCM51700084","4":"1","5":"76","6":"Drake","7":"3TVXtAsR1Inumwj472S9r4","8":"Drake","9":"3TVXtAsR1Inumwj472S9r4","10":"More Life","11":"1lXY618HWkwYKJWBRYR4MK","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IN, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"79","14":"2017-03-18","15":"day","16":"0.927","17":"0.488","18":"9","19":"-9.433","20":"0","21":"0.4200","22":"0.1080","23":"0.00000000","24":"0.196","25":"0.605","26":"133.987","27":"210937","28":"4","29":"spotify:track:343YBumqHu19cGoGARUTsd","30":"https://api.spotify.com/v1/audio-analysis/343YBumqHu19cGoGARUTsd","31":"35200192","32":"artist","33":"98","34":"canadian hip hop","35":"canadian hip hop, canadian pop, hip hop, pop rap, rap","36":"5","37":"403","38":"27","39":"37","40":"339","41":"0","42":"425740.1","43":"us","44":"34419285169424099066628240286688246028008200020264000666286680004846860408284404088266622826680488408820820066466","45":"pop","46":"pop","47":"explicit"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>How can we plot this kind of data? Since we have a categorical variable, we will use a bar plot. However, to be able to use the table for your plot, you first need to assign it to an object as a data frame using the <code>as.data.frame()</code>-function.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1">table_plot_rel &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, </a>
<a class="sourceLine" id="cb125-2" title="2">    <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>)])))  <span class="co">#relative frequencies #relative frequencies</span></a>
<a class="sourceLine" id="cb125-3" title="3"><span class="kw">head</span>(table_plot_rel)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Var1"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["Freq"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"hip hop","2":"0.23643263"},{"1":"indie","2":"0.01260083"},{"1":"pop","2":"0.67891747"},{"1":"rap","2":"0.02816095"},{"1":"rock","2":"0.04388812"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Since <code>Var1</code> is not a very descriptive name, let’s rename the variable to something more meaningful</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1"><span class="kw">library</span>(plyr)</a>
<a class="sourceLine" id="cb126-2" title="2">table_plot_rel &lt;-<span class="st"> </span>plyr<span class="op">::</span><span class="kw">rename</span>(table_plot_rel, <span class="kw">c</span>(<span class="dt">Var1 =</span> <span class="st">&quot;Genre&quot;</span>))</a>
<a class="sourceLine" id="cb126-3" title="3"><span class="kw">head</span>(table_plot_rel)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Genre"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["Freq"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"hip hop","2":"0.23643263"},{"1":"indie","2":"0.01260083"},{"1":"pop","2":"0.67891747"},{"1":"rap","2":"0.02816095"},{"1":"rock","2":"0.04388812"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Once we have our data set we can begin constructing the plot. As mentioned previously, we start with the <code>ggplot()</code> function, with the argument specifying the data set to be used. Within the function, we further specify the scales to be used using the aesthetics argument, specifying which variable should be plotted on which axis. In our example, we would like to plot the categories on the x-axis (horizontal axis) and the relative frequencies on the y-axis (vertical axis).</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" title="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb127-2" title="2">bar_chart &lt;-<span class="st"> </span><span class="kw">ggplot</span>(table_plot_rel, <span class="kw">aes</span>(<span class="dt">x =</span> Genre, </a>
<a class="sourceLine" id="cb127-3" title="3">    <span class="dt">y =</span> Freq))</a>
<a class="sourceLine" id="cb127-4" title="4">bar_chart</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-72"></span>
<img src="_main_files/figure-html/unnamed-chunk-72-1.png" alt="Bar chart (step 1)" width="672" />
<p class="caption">
Figure 2.1: Bar chart (step 1)
</p>
</div>
<p>You can see that the coordinate system is empty. This is because so far, we have told R merely which variables we would like to plot but we haven’t specified which geometric figures (points, bars, lines, etc.) we would like to use. This is done using the <code>geom_xxx</code> function. ggplot includes many different geoms, for a wide range of plots (e.g., geom_line, geom_histogram, geom_boxplot, etc.). A good overview of the various geom functions can be found <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" target="_blank">here</a>. In our case, we would like to use a bar chart for which <code>geom_col</code> is appropriate.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-73"></span>
<img src="_main_files/figure-html/unnamed-chunk-73-1.png" alt="Bar chart (step 2)" width="672" />
<p class="caption">
Figure 2.2: Bar chart (step 2)
</p>
</div>
<p>Note that the same could be achieved using <code>geom_bar</code>. However, by default <code>geom_bar</code> counts the number of observations within each category of a variable. This is not required in our case because we have already used the <code>prop.table()</code> function to compute the relative frequencies. The argument <code>stat = "identity"</code> prevents <code>geom_bar</code> from performing counting operations and uses it “as it is”.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-74"></span>
<img src="_main_files/figure-html/unnamed-chunk-74-1.png" alt="Bar chart (alternative specification)" width="672" />
<p class="caption">
Figure 2.3: Bar chart (alternative specification)
</p>
</div>
<p>Now we have specified the data, the scales and the shape. Specifying this information is essential for plotting data using ggplot. Everything that follows now just serves the purpose of making the plot look nicer by modifying the appearance of the plot. How about some more meaningful axis labels? We can specify the axis labels using the <code>ylab()</code> and <code>xlab()</code> functions:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb130-2" title="2"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-75"></span>
<img src="_main_files/figure-html/unnamed-chunk-75-1.png" alt="Bar chart (step 3)" width="672" />
<p class="caption">
Figure 2.4: Bar chart (step 3)
</p>
</div>
<p>How about adding some value labels to the bars? This can be done using <code>geom_text()</code>. Note that the <code>sprintf()</code> function is not mandatory and is only added to format the numeric labels here. The function takes two arguments: the first specifies the format wrapped in two <code>%</code> sings. Thus, <code>%.0f</code> means to format the value as a fixed point value with no digits after the decimal point, and <code>%%</code> is a literal that prints a “%” sign. The second argument is simply the numeric value to be used. In this case, the relative frequencies multiplied by 100 to obtain the percentage values. Using the <code>vjust =</code> argument, we can adjust the vertical alignment of the label. In this case, we would like to display the label slightly above the bars.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb131-2" title="2"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%.0f%%&quot;</span>, </a>
<a class="sourceLine" id="cb131-3" title="3">    Freq<span class="op">/</span><span class="kw">sum</span>(Freq) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)), <span class="dt">vjust =</span> <span class="fl">-0.2</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-76"></span>
<img src="_main_files/figure-html/unnamed-chunk-76-1.png" alt="Bar chart (step 4)" width="672" />
<p class="caption">
Figure 2.5: Bar chart (step 4)
</p>
</div>
<p>We could go ahead and specify the appearance of every single element of the plot now. However, there are also pre-specified themes that include various formatting steps in one singe function. For example <code>theme_bw()</code> would make the plot appear like this:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb132-2" title="2"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%.0f%%&quot;</span>, </a>
<a class="sourceLine" id="cb132-3" title="3">    Freq<span class="op">/</span><span class="kw">sum</span>(Freq) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)), <span class="dt">vjust =</span> <span class="fl">-0.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-77"></span>
<img src="_main_files/figure-html/unnamed-chunk-77-1.png" alt="Bar chart (step 5)" width="672" />
<p class="caption">
Figure 2.6: Bar chart (step 5)
</p>
</div>
<p>and <code>theme_minimal()</code> looks like this:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb133-2" title="2"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%.0f%%&quot;</span>, </a>
<a class="sourceLine" id="cb133-3" title="3">    Freq<span class="op">/</span><span class="kw">sum</span>(Freq) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)), <span class="dt">vjust =</span> <span class="fl">-0.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-78"></span>
<img src="_main_files/figure-html/unnamed-chunk-78-1.png" alt="Bar chart (options 1)" width="672" />
<p class="caption">
Figure 2.7: Bar chart (options 1)
</p>
</div>
<p>These were examples of built-in formations of <code>ggolot()</code>, where the default is <code>theme_classic()</code>. For even more options, check out the <code>ggthemes</code> package, which includes formats for specific publications. You can check out the different themes <a href="https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html" target="_blank">here</a>. For example <code>theme_economist()</code> uses the formatting of the journal “The Economist”:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb134-2" title="2">bar_chart <span class="op">+</span><span class="st"> </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb134-3" title="3"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_economist</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-79"></span>
<img src="_main_files/figure-html/unnamed-chunk-79-1.png" alt="Bar chart (options 2)" width="672" />
<p class="caption">
Figure 2.8: Bar chart (options 2)
</p>
</div>
<p><strong>Summary</strong></p>
<p>To create a plot with ggplot we give it the appropriate data (in the <code>ggplot()</code> function), tell it which shape to use (via a function of the geom family), assign variables to the correct axis (by using the the <code>aes()</code> function) and define the appearance of the plot.</p>
<p>Now we would like to investigate whether the distribution differs between explicit and non-explicit songs. For this purpose we first construct the conditional relative frequency table from the previous chapter again. Recall that the latter gives us the relative frequency within a group (in our case explicit and non-explicit), as compared to the relative frequency within the entire sample.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1">table_plot_cond_rel &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, </a>
<a class="sourceLine" id="cb135-2" title="2">    <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>, <span class="st">&quot;explicit_cat&quot;</span>)]), <span class="dv">2</span>))  <span class="co">#conditional relative frequencies</span></a></code></pre></div>
<p>We can now take these tables to construct plots grouped by explicitness. To achieve this we simply need to add the <code>facet_wrap()</code> function, which replicates a plot multiple times, split by a specified grouping factor. Note that the grouping factor has to be supplied in R’s formula notation, hence it is preceded by a “~” symbol.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1"><span class="kw">ggplot</span>(table_plot_cond_rel, <span class="kw">aes</span>(<span class="dt">x =</span> genre_cat, <span class="dt">y =</span> Freq)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb136-2" title="2"><span class="st">    </span><span class="kw">geom_col</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>explicit_cat) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Conditional relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb136-3" title="3"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-81"></span>
<img src="_main_files/figure-html/unnamed-chunk-81-1.png" alt="Grouped bar chart (conditional relative frequencies)" width="672" />
<p class="caption">
Figure 2.9: Grouped bar chart (conditional relative frequencies)
</p>
</div>
<p>To plot the relative frequencies for each response category by group in a slightly different way, we can also use the <code>fill</code> argument, which tells ggplot to fill the bars by a specified variable (in our case “explicit”). The <code>position = "dodge"</code> argument causes the bars to be displayed next to each other (as opposed to stacked on top of one another).</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="kw">ggplot</span>(table_plot_cond_rel, <span class="kw">aes</span>(<span class="dt">x =</span> genre_cat, <span class="dt">y =</span> Freq, <span class="dt">fill =</span> explicit_cat)) <span class="op">+</span><span class="st"> </span><span class="co">#use &quot;fill&quot; argument for different colors</span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co">#use &quot;dodge&quot; to display bars next to each other (instead of stacked on top)</span></a>
<a class="sourceLine" id="cb137-3" title="3"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%.0f%%&quot;</span>, Freq<span class="op">/</span><span class="kw">sum</span>(Freq) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)),<span class="dt">position=</span><span class="kw">position_dodge</span>(<span class="dt">width=</span><span class="fl">0.9</span>), <span class="dt">vjust=</span><span class="op">-</span><span class="fl">0.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb137-4" title="4"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Conditional relative frequency&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb137-5" title="5"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb137-6" title="6"><span class="st">  </span><span class="kw">theme_bw</span>() </a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-82"></span>
<img src="_main_files/figure-html/unnamed-chunk-82-1.png" alt="Grouped bar chart (conditional relative frequencies) (2)" width="672" />
<p class="caption">
Figure 2.10: Grouped bar chart (conditional relative frequencies) (2)
</p>
</div>
</div>
<div id="covariation-plots" class="section level4">
<h4><span class="header-section-number">2.4.1.2</span> Covariation plots</h4>
<p>To visualize the covariation between categorical variables, you’ll need to count the number of observations for each combination stored in the frequency table. Say, we wanted to investigate the association between genre and popularity. First, we need to make sure that the respective variables are coded as factors.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1">music_data<span class="op">$</span>genre_cat &lt;-<span class="st"> </span><span class="kw">as.factor</span>(music_data<span class="op">$</span>top.genre)</a>
<a class="sourceLine" id="cb138-2" title="2"></a>
<a class="sourceLine" id="cb138-3" title="3">music_data<span class="op">$</span>popularity_factor &lt;-<span class="st"> </span><span class="kw">cut</span>(music_data<span class="op">$</span>trackPopularity, </a>
<a class="sourceLine" id="cb138-4" title="4">    <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="op">-</span><span class="ot">Inf</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="ot">Inf</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, </a>
<a class="sourceLine" id="cb138-5" title="5">        <span class="st">&quot;middle&quot;</span>, <span class="st">&quot;high&quot;</span>))</a></code></pre></div>
<p>There are multiple ways to visualize such a relationship with ggplot. One option would be to use a variation of the scatterplot which counts how many points overlap at any given point and increases the dot size accordingly. This can be achieved with <code>geom_count()</code>. From the bar charts above, we know that the categories in <code>genre</code> differ in size. To account for that we set the parameters <code>size</code> and <code>group</code> in <code>geom_count</code>, which gives us the conditional relative frequencies. This is equivalent to the conditional relative frequency table from above, only now the <code>stat(prop)</code> argument assures that we get relative frequencies and with the <code>group</code> argument we tell R to compute the relative frequencies by genre.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> music_data) <span class="op">+</span><span class="st"> </span><span class="kw">geom_count</span>(<span class="kw">aes</span>(<span class="dt">x =</span> genre_cat, </a>
<a class="sourceLine" id="cb139-2" title="2">    <span class="dt">y =</span> popularity_factor, <span class="dt">size =</span> <span class="kw">stat</span>(prop), <span class="dt">group =</span> genre_cat)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb139-3" title="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Popularity&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">size =</span> <span class="st">&quot;Proportion&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb139-4" title="4"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-84"></span>
<img src="_main_files/figure-html/unnamed-chunk-84-1.png" alt="Covariation between categorical data (1)" width="672" />
<p class="caption">
Figure 2.11: Covariation between categorical data (1)
</p>
</div>
<p>Another option would be to use a tile plot that changes the color of the tile based on the frequency of the combination of factors. To achieve this we first have to create a dataframe that contains the relative frequencies of all combinations of factors. Then we can take this dataframe and supply it to <code>geom_tile()</code>, while specifying that the fill of each tile should be dependent on the observed frequency of the factor combination, which is done by specifying the fill in the <code>aes()</code> function.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1">table_plot_rel &lt;-<span class="st"> </span><span class="kw">prop.table</span>(<span class="kw">table</span>(music_data[, <span class="kw">c</span>(<span class="st">&quot;genre_cat&quot;</span>, </a>
<a class="sourceLine" id="cb140-2" title="2">    <span class="st">&quot;popularity_factor&quot;</span>)]), <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb140-3" title="3">table_plot_rel &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(table_plot_rel)</a>
<a class="sourceLine" id="cb140-4" title="4"></a>
<a class="sourceLine" id="cb140-5" title="5"><span class="kw">ggplot</span>(table_plot_rel, <span class="kw">aes</span>(<span class="dt">x =</span> genre_cat, <span class="dt">y =</span> popularity_factor)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb140-6" title="6"><span class="st">    </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Freq)) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Popularity&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb140-7" title="7"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Genre&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-85"></span>
<img src="_main_files/figure-html/unnamed-chunk-85-1.png" alt="Covariation between categorical data (2)" width="672" />
<p class="caption">
Figure 2.12: Covariation between categorical data (2)
</p>
</div>
</div>
</div>
<div id="continuous-variables-1" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Continuous variables</h3>
<div id="histogram" class="section level4">
<h4><span class="header-section-number">2.4.2.1</span> Histogram</h4>
<p>Histograms can be plotted for continuous data using the <code>geom_histogram()</code> function. Note that the <code>aes()</code> function only needs one argument here, since a histogram is a plot of the distribution of only one variable. As an example, let’s consider our data set containing the advertising expenditures and product sales of a company selling products in two different stores:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1"><span class="kw">head</span>(music_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["trackName"],"name":[2],"type":["chr"],"align":["left"]},{"label":["isrc"],"name":[3],"type":["chr"],"align":["left"]},{"label":["explicit"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["trackPopularity"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["primary_artistName"],"name":[6],"type":["chr"],"align":["left"]},{"label":["primary_artistID"],"name":[7],"type":["chr"],"align":["left"]},{"label":["artistName"],"name":[8],"type":["chr"],"align":["left"]},{"label":["artistIDs"],"name":[9],"type":["chr"],"align":["left"]},{"label":["albumName"],"name":[10],"type":["chr"],"align":["left"]},{"label":["albumID"],"name":[11],"type":["chr"],"align":["left"]},{"label":["available_markets"],"name":[12],"type":["chr"],"align":["left"]},{"label":["n_available_markets"],"name":[13],"type":["dbl"],"align":["right"]},{"label":["releaseDate"],"name":[14],"type":["date"],"align":["right"]},{"label":["releaseDate_precision"],"name":[15],"type":["chr"],"align":["left"]},{"label":["danceability"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["energy"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["key"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["loudness"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["mode"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["speechiness"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["acousticness"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["instrumentalness"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["liveness"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["valence"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["tempo"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["duration_ms"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["time_signature"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["uri"],"name":[29],"type":["chr"],"align":["left"]},{"label":["analysis_url"],"name":[30],"type":["chr"],"align":["left"]},{"label":["followers"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["type"],"name":[32],"type":["chr"],"align":["left"]},{"label":["popularity"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["primary_genre"],"name":[34],"type":["chr"],"align":["left"]},{"label":["genres"],"name":[35],"type":["chr"],"align":["left"]},{"label":["n_genres"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["total_releases"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["n_album"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["n_single"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["n_appears_on"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["n_compilation"],"name":[41],"type":["dbl"],"align":["right"]},{"label":["mstreams"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["region"],"name":[43],"type":["chr"],"align":["left"]},{"label":["adv_spending"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["top.genre"],"name":[45],"type":["chr"],"align":["left"]},{"label":["genre_cat"],"name":[46],"type":["fctr"],"align":["left"]},{"label":["explicit_cat"],"name":[47],"type":["fctr"],"align":["left"]},{"label":["popularity_factor"],"name":[48],"type":["fctr"],"align":["left"]}],"data":[{"1":"5aAx2yezTd8zXrkmtKl66Z","2":"Starboy","3":"USUG11600976","4":"1","5":"22","6":"The Weeknd","7":"1Xyo4u8uXC1ZmMpatF05PJ","8":"The Weeknd feat. Daft Punk","9":"1Xyo4u8uXC1ZmMpatF05PJ,4tZwfgrHOc3mvqYlEYSvVi","10":"Starboy","11":"09fggMHib4YkOtwQNXEBII","12":"NA","13":"0","14":"2016-11-25","15":"day","16":"0.681","17":"0.594","18":"7","19":"-7.028","20":"1","21":"0.2820","22":"0.1650","23":"0.00000349","24":"0.134","25":"0.535","26":"186.054","27":"230453","28":"4","29":"spotify:track:5aAx2yezTd8zXrkmtKl66Z","30":"https://api.spotify.com/v1/audio-analysis/5aAx2yezTd8zXrkmtKl66Z","31":"15222808","32":"artist","33":"91","34":"canadian contemporary r&b","35":"canadian contemporary r&b, canadian pop, pop, rap","36":"4","37":"124","38":"13","39":"20","40":"91","41":"0","42":"357336.0","43":"us","44":"4538745582809720084484024442860668048880048662828002246462622248860488860200660880246202488046088200066826842264","45":"pop","46":"pop","47":"explicit","48":"low"},{"1":"7BKLCZ1jbUBVqRi2FVlTVw","2":"Closer","3":"USQX91601347","4":"0","5":"86","6":"The Chainsmokers","7":"69GGBxA162lTqCwzJG5jLp","8":"The Chainsmokers feat. Halsey","9":"69GGBxA162lTqCwzJG5jLp,26VFTg2z8YR0cCuwLzESi2","10":"Closer","11":"0rSLgV8p5FzfnqlEk4GzxE","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IN, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"79","14":"2016-07-29","15":"day","16":"0.748","17":"0.524","18":"8","19":"-5.599","20":"1","21":"0.0338","22":"0.4140","23":"0.00000000","24":"0.111","25":"0.661","26":"95.010","27":"244960","28":"4","29":"spotify:track:7BKLCZ1jbUBVqRi2FVlTVw","30":"https://api.spotify.com/v1/audio-analysis/7BKLCZ1jbUBVqRi2FVlTVw","31":"11565104","32":"artist","33":"90","34":"dance pop","35":"dance pop, electropop, pop, tropical house","36":"4","37":"96","38":"2","39":"59","40":"35","41":"0","42":"323081.4","43":"us","44":"87296125002616694832882460600060208466800848806624260244862640444286060866044600806284802800064402066048406208","45":"pop","46":"pop","47":"not explicit","48":"high"},{"1":"4pdPtRcBmOSQDlJ3Fk945m","2":"Let Me Love You","3":"QMZSY1600015","4":"0","5":"27","6":"DJ Snake","7":"540vIaP2JwjQb9dm3aArA4","8":"DJ Snake feat. Justin Bieber","9":"540vIaP2JwjQb9dm3aArA4,1uNFoZAHBGtllmzznpCI3s","10":"Encore","11":"55bbXORm6ZrVq52zfZnxBf","12":"NA","13":"0","14":"2016-08-05","15":"day","16":"0.476","17":"0.718","18":"8","19":"-5.309","20":"1","21":"0.0576","22":"0.0784","23":"0.00000000","24":"0.122","25":"0.142","26":"199.864","27":"205947","28":"4","29":"spotify:track:4pdPtRcBmOSQDlJ3Fk945m","30":"https://api.spotify.com/v1/audio-analysis/4pdPtRcBmOSQDlJ3Fk945m","31":"4345960","32":"artist","33":"86","34":"dance pop","35":"dance pop, edm, electronic trap, pop, tropical house","36":"5","37":"85","38":"2","39":"38","40":"45","41":"0","42":"264546.4","43":"us","44":"4052673829394860012068608242402620220642222464600242282482886024464808420264228282600202608242446606420002080","45":"pop","46":"pop","47":"not explicit","48":"low"},{"1":"5knuzwU65gJK7IF5yJsuaW","2":"Rockabye (feat. Sean Paul & Anne-Marie)","3":"GBAHS1600363","4":"0","5":"81","6":"Clean Bandit","7":"6MDME20pz9RveH9rEXvrOM","8":"Clean Bandit feat. Sean Paul feat. Anne-Marie","9":"6MDME20pz9RveH9rEXvrOM,3Isy6kedDrgPYoTS1dazA9,1zNqDE7qDGCsyzJwohVaoX","10":"Rockabye (feat. Sean Paul & Anne-Marie)","11":"3meZFplbMmji648oWUNEfQ","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"78","14":"2016-10-21","15":"day","16":"0.720","17":"0.763","18":"9","19":"-4.068","20":"0","21":"0.0523","22":"0.4060","23":"0.00000000","24":"0.180","25":"0.742","26":"101.965","27":"251088","28":"4","29":"spotify:track:5knuzwU65gJK7IF5yJsuaW","30":"https://api.spotify.com/v1/audio-analysis/5knuzwU65gJK7IF5yJsuaW","31":"2504254","32":"artist","33":"84","34":"dance pop","35":"dance pop, edm, pop, tropical house, uk funky","36":"5","37":"97","38":"2","39":"73","40":"22","41":"0","42":"299399.5","43":"us","44":"63076779883569398412860000868482028288628844246244082246422600040886402246824442664406842200224602284406228008","45":"pop","46":"pop","47":"not explicit","48":"high"},{"1":"1xznGGDReH1oQq0xzbwXa3","2":"One Dance","3":"USCM51600028","4":"0","5":"25","6":"Drake","7":"3TVXtAsR1Inumwj472S9r4","8":"Drake feat. WizKid feat. Kyla","9":"3TVXtAsR1Inumwj472S9r4,3tVQdUvClmAT7URs9V3rsp,77DAFfvm3O9zT5dIoG0eIO","10":"Views","11":"3hARKC8cinq3mZLLAEaBh9","12":"NA","13":"0","14":"2016-05-06","15":"day","16":"0.791","17":"0.619","18":"1","19":"-5.886","20":"1","21":"0.0532","22":"0.0078","23":"0.00420000","24":"0.351","25":"0.371","26":"103.989","27":"173987","28":"4","29":"spotify:track:1xznGGDReH1oQq0xzbwXa3","30":"https://api.spotify.com/v1/audio-analysis/1xznGGDReH1oQq0xzbwXa3","31":"35200192","32":"artist","33":"98","34":"canadian hip hop","35":"canadian hip hop, canadian pop, hip hop, pop rap, rap","36":"5","37":"403","38":"27","39":"37","40":"339","41":"0","42":"265877.0","43":"us","44":"4668617894331640150824284686604420280424480024404060860488826264282200468808642628046046820200280026606226842","45":"pop","46":"pop","47":"not explicit","48":"low"},{"1":"343YBumqHu19cGoGARUTsd","2":"Fake Love","3":"USCM51700084","4":"1","5":"76","6":"Drake","7":"3TVXtAsR1Inumwj472S9r4","8":"Drake","9":"3TVXtAsR1Inumwj472S9r4","10":"More Life","11":"1lXY618HWkwYKJWBRYR4MK","12":"AD, AE, AR, AT, AU, BE, BG, BH, BO, BR, CA, CH, CL, CO, CR, CY, CZ, DE, DK, DO, DZ, EC, EE, EG, ES, FI, FR, GB, GR, GT, HK, HN, HU, ID, IE, IL, IN, IS, IT, JO, JP, KW, LB, LI, LT, LU, LV, MA, MC, MT, MX, MY, NI, NL, NO, NZ, OM, PA, PE, PH, PL, PS, PT, PY, QA, RO, SA, SE, SG, SK, SV, TH, TN, TR, TW, US, UY, VN, ZA","13":"79","14":"2017-03-18","15":"day","16":"0.927","17":"0.488","18":"9","19":"-9.433","20":"0","21":"0.4200","22":"0.1080","23":"0.00000000","24":"0.196","25":"0.605","26":"133.987","27":"210937","28":"4","29":"spotify:track:343YBumqHu19cGoGARUTsd","30":"https://api.spotify.com/v1/audio-analysis/343YBumqHu19cGoGARUTsd","31":"35200192","32":"artist","33":"98","34":"canadian hip hop","35":"canadian hip hop, canadian pop, hip hop, pop rap, rap","36":"5","37":"403","38":"27","39":"37","40":"339","41":"0","42":"425740.1","43":"us","44":"34419285169424099066628240286688246028008200020264000666286680004846860408284404088266622826680488408820820066466","45":"pop","46":"pop","47":"explicit","48":"high"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now we can create the histogram using <code>geom_histogram()</code>. The argument <code>binwidth</code> specifies the range that each bar spans, <code>col = "black"</code> specifies the border to be black and <code>fill = "darkblue"</code> sets the inner color of the bars to dark blue. For brevity, we have now also started naming the x and y axis with the single function <code>labs()</code>, instead of using the two distinct functions <code>xlab()</code> and <code>ylab()</code>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(mstreams)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">3000</span>, </a>
<a class="sourceLine" id="cb142-2" title="2">    <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;darkblue&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Number of streams&quot;</span>, </a>
<a class="sourceLine" id="cb142-3" title="3">    <span class="dt">y =</span> <span class="st">&quot;Frequency&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-87"></span>
<img src="_main_files/figure-html/unnamed-chunk-87-1.png" alt="Histogram" width="672" />
<p class="caption">
Figure 2.13: Histogram
</p>
</div>
</div>
<div id="boxplot" class="section level4">
<h4><span class="header-section-number">2.4.2.2</span> Boxplot</h4>
<p>Another common way to display the distribution of continuous variables is through boxplots. ggplot will construct a boxplot if given the geom <code>geom_boxplot()</code>. In our case we want to show the difference in distribution between the two stores in our sample, which is why the <code>aes()</code> function contains both an x and a y variable.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="dt">x =</span> explicit_cat, <span class="dt">y =</span> mstreams)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb143-2" title="2"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">coef =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Explicit&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of streams&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb143-3" title="3"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-88"></span>
<img src="_main_files/figure-html/unnamed-chunk-88-1.png" alt="Boxplot by group" width="672" />
<p class="caption">
Figure 2.14: Boxplot by group
</p>
</div>
<p>The following graphic shows you how to interpret the boxplot:</p>
<div class="figure">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/boxplot.JPG" alt="Information contained in a Boxplot" />
<p class="caption">Information contained in a Boxplot</p>
</div>
<p>You may also augment the boxplot with the data points using <code>geom_jitter()</code>:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="dt">x =</span> explicit_cat, <span class="dt">y =</span> mstreams)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb144-2" title="2"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">coef =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>(<span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, </a>
<a class="sourceLine" id="cb144-3" title="3">    <span class="dt">alpha =</span> <span class="fl">0.2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Explicit&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of streams&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb144-4" title="4"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-89"></span>
<img src="_main_files/figure-html/unnamed-chunk-89-1.png" alt="Boxplot with augmented data points" width="672" />
<p class="caption">
Figure 2.15: Boxplot with augmented data points
</p>
</div>
<p>In case you would like to create the boxplot on the total data (i.e., not by group), just leave the <code>x =</code> argument within the <code>aes()</code> function empty:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> mstreams)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="dt">coef =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb145-2" title="2"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Total&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of streams&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-90"></span>
<img src="_main_files/figure-html/unnamed-chunk-90-1.png" alt="Single Boxplot" width="672" />
<p class="caption">
Figure 2.16: Single Boxplot
</p>
</div>
</div>
<div id="plot-of-means" class="section level4">
<h4><span class="header-section-number">2.4.2.3</span> Plot of means</h4>
<p>Another quick way to get an overview of the difference between two groups is to plot their respective means with confidence intervals. Two things about this plot are new. First, there are now two geoms included in the same plot. This is one of the big advantages of ggplot’s layered approach to graphs, the fact that new elements can be drawn by simply adding a new line with a new geom function. In this case we want to add confidence bounds to our plot, which we achieve by adding a <code>geom_pointrange()</code> layer. Recall that if the interval is small, the sample must be very close to the population and when the interval is wide, the sample mean is likely very different from the population mean and therefore a bad representation of the population. Second, we are using an additional argument in <code>geom_bar()</code>, namely <code>stat =</code>, which is short for statistical transformation. Every geom uses such a transformation in the background to adapt the data to be able to create the desired plot. <code>geom_bar()</code> typically uses the <code>count</code> stat, which would create a similar plot to the one we saw at the very beginning, counting how often a certain value of a variable appears. By telling <code>geom_bar()</code> explicitly that we want to use a different stat we can override its behavior, forcing it to create a bar plot of the means.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" title="1">music_data2 &lt;-<span class="st"> </span>music_data[music_data<span class="op">$</span>duration_ms, ]</a>
<a class="sourceLine" id="cb146-2" title="2"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(explicit_cat, duration_ms)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb146-3" title="3"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, </a>
<a class="sourceLine" id="cb146-4" title="4">        <span class="dt">width =</span> <span class="fl">0.7</span>, <span class="dt">na.rm =</span> T) <span class="op">+</span><span class="st"> </span><span class="kw">geom_pointrange</span>(<span class="dt">stat =</span> <span class="st">&quot;summary&quot;</span>, </a>
<a class="sourceLine" id="cb146-5" title="5">    <span class="dt">fun.ymin =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">sd</span>(x), <span class="dt">fun.ymax =</span> <span class="cf">function</span>(x) <span class="kw">mean</span>(x) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb146-6" title="6"><span class="st">        </span><span class="kw">sd</span>(x), <span class="dt">fun.y =</span> mean, <span class="dt">na.rm =</span> T) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Explicit&quot;</span>, </a>
<a class="sourceLine" id="cb146-7" title="7">    <span class="dt">y =</span> <span class="st">&quot;Average number of streams&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># coord_cartesian(ylim = c(100000, 150000)) +</span></a>
<a class="sourceLine" id="cb146-8" title="8"><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-91"></span>
<img src="_main_files/figure-html/unnamed-chunk-91-1.png" alt="Plot of means" width="672" />
<p class="caption">
Figure 2.17: Plot of means
</p>
</div>
</div>
<div id="scatter-plot" class="section level4">
<h4><span class="header-section-number">2.4.2.4</span> Scatter plot</h4>
<p>The most common way to show the relationship between two continuous variables is a scatterplot. The following code creates a scatterplot with some additional components. The <code>geom_smooth()</code> function creates a smoothed line from the data provided. In this particular example we tell the function to draw the best possible straight line (i.e., minimizing the distance between the line and the points) through the data (via the argument <code>method = "lm"</code>). The “fill” and “alpha” arguments solely affect appearance, in our case the color and the opacity of the confidence interval, respectively.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="kw">log</span>(adv_spending), mstreams)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb147-2" title="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;blue&quot;</span>, </a>
<a class="sourceLine" id="cb147-3" title="3">    <span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Advertising expenditures (EUR)&quot;</span>, </a>
<a class="sourceLine" id="cb147-4" title="4">    <span class="dt">y =</span> <span class="st">&quot;Number of streams&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-92"></span>
<img src="_main_files/figure-html/unnamed-chunk-92-1.png" alt="Scatter plot" width="672" />
<p class="caption">
Figure 2.18: Scatter plot
</p>
</div>
<p>As you can see, there appears to be a positive relationship between advertising and sales.</p>
<div id="grouped-scatter-plot" class="section level5">
<h5><span class="header-section-number">2.4.2.4.1</span> Grouped scatter plot</h5>
<p>It could be that customers from different store respond differently to advertising. We can visually capture such differences with a grouped scatter plot. By adding the argument <code>colour = store</code> to the aesthetic specification, ggplot automatically treats the two stores as distinct groups and plots accordingly.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" title="1"><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="kw">log</span>(adv_spending), mstreams, </a>
<a class="sourceLine" id="cb148-2" title="2">    <span class="dt">colour =</span> explicit_cat)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, </a>
<a class="sourceLine" id="cb148-3" title="3">    <span class="dt">alpha =</span> <span class="fl">0.1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Advertising expenditures (EUR)&quot;</span>, </a>
<a class="sourceLine" id="cb148-4" title="4">    <span class="dt">y =</span> <span class="st">&quot;Number of streams&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;Explicit&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb148-5" title="5"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-93"></span>
<img src="_main_files/figure-html/unnamed-chunk-93-1.png" alt="Grouped scatter plot" width="672" />
<p class="caption">
Figure 2.19: Grouped scatter plot
</p>
</div>
<p>It appears from the plot that explicit tracks are more responsive to advertising.</p>
</div>
<div id="combination-of-scatter-plot-and-histogram" class="section level5">
<h5><span class="header-section-number">2.4.2.4.2</span> Combination of scatter plot and histogram</h5>
<p>Using the <code>ggExtra()</code> package, you may also augment the scatterplot with a histogram:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="kw">library</span>(ggExtra)</a>
<a class="sourceLine" id="cb149-2" title="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(music_data, <span class="kw">aes</span>(<span class="kw">log</span>(adv_spending), mstreams)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb149-3" title="3"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Advertising expenditures (EUR)&quot;</span>, </a>
<a class="sourceLine" id="cb149-4" title="4">    <span class="dt">y =</span> <span class="st">&quot;Number of strams&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;store&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb149-5" title="5">ggExtra<span class="op">::</span><span class="kw">ggMarginal</span>(p, <span class="dt">type =</span> <span class="st">&quot;histogram&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-94"></span>
<img src="_main_files/figure-html/unnamed-chunk-94-1.png" alt="Scatter plot with histogram" width="672" />
<p class="caption">
Figure 2.20: Scatter plot with histogram
</p>
</div>
<p>In this case, the <code>type = "histogram"</code> argument specifies that we would like to plot a histogram. However, you could also opt for <code>type = "boxplot"</code> or <code>type = "density"</code> to use a boxplot or density plot instead.</p>
</div>
</div>
<div id="line-plot" class="section level4">
<h4><span class="header-section-number">2.4.2.5</span> Line plot</h4>
<p>Another important type of plot is the line plot used if, for example, you have a variable that changes over time and you want to plot how it develops over time. To demonstrate this we first gather the population of Austria from the world bank API (as we did previously).</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" title="1"><span class="kw">library</span>(jsonlite)</a>
<a class="sourceLine" id="cb150-2" title="2"><span class="co"># specifies url</span></a>
<a class="sourceLine" id="cb150-3" title="3">url &lt;-<span class="st"> &quot;http://api.worldbank.org/countries/AT/indicators/SP.POP.TOTL/?date=1960:2016&amp;format=json&amp;per_page=100&quot;</span></a>
<a class="sourceLine" id="cb150-4" title="4">ctrydata_at &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(url)  <span class="co">#parses the data </span></a>
<a class="sourceLine" id="cb150-5" title="5"><span class="kw">head</span>(ctrydata_at[[<span class="dv">2</span>]][, <span class="kw">c</span>(<span class="st">&quot;value&quot;</span>, <span class="st">&quot;date&quot;</span>)])  <span class="co">#checks if we scraped the desired data</span></a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"8736668","2":"2016"},{"1":"8642699","2":"2015"},{"1":"8546356","2":"2014"},{"1":"8479823","2":"2013"},{"1":"8429991","2":"2012"},{"1":"8391643","2":"2011"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1">ctrydata_at &lt;-<span class="st"> </span>ctrydata_at[[<span class="dv">2</span>]][, <span class="kw">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;value&quot;</span>)]</a>
<a class="sourceLine" id="cb151-2" title="2">ctrydata_at<span class="op">$</span>value &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(ctrydata_at<span class="op">$</span>value)</a>
<a class="sourceLine" id="cb151-3" title="3">ctrydata_at<span class="op">$</span>date &lt;-<span class="st"> </span><span class="kw">as.integer</span>(ctrydata_at<span class="op">$</span>date)</a>
<a class="sourceLine" id="cb151-4" title="4"><span class="kw">str</span>(ctrydata_at)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    57 obs. of  2 variables:
##  $ date : int  2016 2015 2014 2013 2012 2011 2010 2009 2008 2007 ...
##  $ value: num  8736668 8642699 8546356 8479823 8429991 ...</code></pre>
<p>As you can see doing this is very straightforward. Given the correct <code>aes()</code> and geom specification ggplot constructs the correct plot for us.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" title="1"><span class="kw">ggplot</span>(ctrydata_at, <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> value)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb153-2" title="2"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Population of Austria&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb153-3" title="3"><span class="st">    </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-96"></span>
<img src="_main_files/figure-html/unnamed-chunk-96-1.png" alt="Line plot" width="672" />
<p class="caption">
Figure 2.21: Line plot
</p>
</div>
</div>
</div>
<div id="saving-plots" class="section level3">
<h3><span class="header-section-number">2.4.3</span> Saving plots</h3>
<p>To save the last displayed plot, simply use the function <code>ggsave()</code>, and it will save the plot to your working directory. Use the arguments <code>height</code>and <code>width</code> to specify the size of the file. You may also choose the file format by adjusting the ending of the file name. E.g., <code>file_name.jpg</code> will create a file in JPG-format, whereas <code>file_name.png</code> saves the file in PNG-format, etc..</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" title="1"><span class="kw">ggplot</span>(table_plot_abs_reg, <span class="kw">aes</span>(<span class="dt">x =</span> Theory_Regression_cat, </a>
<a class="sourceLine" id="cb154-2" title="2">    <span class="dt">y =</span> Practice_Regression_cat)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> Freq)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb154-3" title="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Practical knowledge&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&quot;Theoretical knowledge&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb154-4" title="4"><span class="st">    </span><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb154-5" title="5"></a>
<a class="sourceLine" id="cb154-6" title="6"><span class="kw">ggsave</span>(<span class="st">&quot;theory_practice_regression.jpg&quot;</span>, <span class="dt">height =</span> <span class="dv">5</span>, </a>
<a class="sourceLine" id="cb154-7" title="7">    <span class="dt">width =</span> <span class="fl">7.5</span>)</a></code></pre></div>
</div>
<div id="additional-options" class="section level3">
<h3><span class="header-section-number">2.4.4</span> Additional options</h3>
<p>Now that we have covered the most important plots, we can look at what other type of data you may come across. One type of data that is increasingly available is the geo-location of customers and users (e.g., from app usage data). The following data set contains the app usage data of Shazam users from Germany. The data contains the latitude and longitude information where a music track was “shazamed”.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" title="1"><span class="kw">library</span>(ggmap)</a>
<a class="sourceLine" id="cb155-2" title="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb155-3" title="3">geo_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/IMSMWU/Teaching/master/MRDA2017/geo_data.dat&quot;</span>, </a>
<a class="sourceLine" id="cb155-4" title="4">    <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb155-5" title="5"><span class="kw">head</span>(geo_data)</a></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["lat"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["lon"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["latlon"],"name":[3],"type":["fctr"],"align":["left"]}],"data":[{"1":"50.7","2":"7.7","3":"50.7_7.7"},{"1":"51.0","2":"6.3","3":"51_6.3"},{"1":"52.2","2":"10.5","3":"52.2_10.5"},{"1":"50.9","2":"11.0","3":"50.9_11"},{"1":"49.9","2":"8.2","3":"49.9_8.2"},{"1":"53.3","2":"13.4","3":"53.3_13.4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>There is a package called “ggmap”, which is an augmentation for the ggplot packages. It lets you load maps from different web services (e.g., Google maps) and maps the user location within the coordination system of ggplot. With this information, you can create interesting plots like heat maps. We won’t go into detail here but you may go through the following code on your own if you are interested. However, please note that you need to register an API with Google in order to make use of this package.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" title="1"><span class="co"># register_google(key = &#39;your_api_key&#39;)</span></a>
<a class="sourceLine" id="cb156-2" title="2"></a>
<a class="sourceLine" id="cb156-3" title="3"><span class="co"># Download the base map</span></a>
<a class="sourceLine" id="cb156-4" title="4">de_map_g_str &lt;-<span class="st"> </span><span class="kw">get_map</span>(<span class="dt">location =</span> <span class="kw">c</span>(<span class="fl">10.018343</span>, <span class="fl">51.133481</span>), </a>
<a class="sourceLine" id="cb156-5" title="5">    <span class="dt">zoom =</span> <span class="dv">6</span>, <span class="dt">scale =</span> <span class="dv">2</span>)  <span class="co"># results in below map (wohoo!)</span></a>
<a class="sourceLine" id="cb156-6" title="6"></a>
<a class="sourceLine" id="cb156-7" title="7"><span class="co"># Draw the heat map</span></a>
<a class="sourceLine" id="cb156-8" title="8"><span class="kw">ggmap</span>(de_map_g_str, <span class="dt">extent =</span> <span class="st">&quot;device&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density2d</span>(<span class="dt">data =</span> geo_data, </a>
<a class="sourceLine" id="cb156-9" title="9">    <span class="kw">aes</span>(<span class="dt">x =</span> lon, <span class="dt">y =</span> lat), <span class="dt">size =</span> <span class="fl">0.3</span>) <span class="op">+</span><span class="st"> </span><span class="kw">stat_density2d</span>(<span class="dt">data =</span> geo_data, </a>
<a class="sourceLine" id="cb156-10" title="10">    <span class="kw">aes</span>(<span class="dt">x =</span> lon, <span class="dt">y =</span> lat, <span class="dt">fill =</span> ..level.., <span class="dt">alpha =</span> ..level..), </a>
<a class="sourceLine" id="cb156-11" title="11">    <span class="dt">size =</span> <span class="fl">0.01</span>, <span class="dt">bins =</span> <span class="dv">16</span>, <span class="dt">geom =</span> <span class="st">&quot;polygon&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low =</span> <span class="st">&quot;green&quot;</span>, </a>
<a class="sourceLine" id="cb156-12" title="12">    <span class="dt">high =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">scale_alpha</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>), </a>
<a class="sourceLine" id="cb156-13" title="13">    <span class="dt">guide =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/ggmaps-1.png" width="672" /></p>

</div>
</div>
<div id="writing-reports-using-r-markdown" class="section level2">
<h2><span class="header-section-number">2.5</span> Writing reports using R-Markdown</h2>
<p>This page will guide you through creating and editing R-Markdown documents. This is a useful tool for reporting your analysis (e.g. for homework assignments). Of course, there is also <a href="https://www.rstudio.org/links/r_markdown_cheat_sheet">a cheat sheet for R-Markdown</a></p>
<div id="creating-a-new-r-markdown-document" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Creating a new R-Markdown document</h3>
<ol start="0" style="list-style-type: decimal">
<li><p>If an R-Markdown file was provided to you, open it with R-Studio and skip to <a href="#step4">step 4</a> after adding your answers.</p></li>
<li><p>Open R-Studio</p></li>
<li><p>Create a new R-Markdown document
<img src="rmdExplain/start.PNG" />
<img src="rmdExplain/openDoc.PNG" />
<img src="rmdExplain/enterName.PNG" />
<img src="rmdExplain/template.PNG" /></p></li>
<li><p>Save with appropriate name
<img src="rmdExplain/saving.PNG" /></p>
<p>3.1. Add your answers</p>
<p>3.2. Save again</p></li>
</ol>
<p><a name="step4"></a></p>
<ol start="4" style="list-style-type: decimal">
<li><p>“Knit” to HTML
<img src="rmdExplain/knit.PNG" /></p></li>
<li><p>Hand in appropriate file (ending in <code>.html</code>) on learn@WU
<img src="rmdExplain/handin.PNG" /></p></li>
</ol>
</div>
<div id="text-and-equations" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Text and Equations</h3>
<p>R-Markdown documents are plain text files that include both text and R-code. Using RStudio they can be converted (‘knitted’) to HTML or PDF files that include both the text and the results of the R-code. In fact this website is written using R-Markdown and RStudio. In order for RStudio to be able to interpret the document you have to use certain characters or combinations of characters when formatting text and including R-code to be evaluated. By default the document starts with the options for the text part. You can change the title, date, author and a few more advanced options.</p>
<div class="figure">
<img src="rmdExplain/rmdHead.PNG" alt="First lines of an R-Markdown document" />
<p class="caption">First lines of an R-Markdown document</p>
</div>
<p>The default is text mode, meaning that lines in an Rmd document will be interpreted as text, unless specified otherwise.</p>
<div id="headings" class="section level4">
<h4><span class="header-section-number">2.5.2.1</span> Headings</h4>
<p>Usually you want to include some kind of heading to structure your text. A heading is created using <code>#</code> signs. A single <code>#</code> creates a first level heading, two <code>##</code> a second level and so on.</p>
<p><img src="rmdExplain/headings.PNG" /></p>
<p>It is important to note here that the <code>#</code> symbol means something different within the code chunks as opposed to outside of them. If you continue to put a <code>#</code> in front of all your regular text, it will all be interpreted as a first level heading, making your text very large.</p>
</div>
<div id="lists" class="section level4">
<h4><span class="header-section-number">2.5.2.2</span> Lists</h4>
<p>Bullet point lists are created using <code>*</code>, <code>+</code> or <code>-</code>. Sub-items are created by indenting the item using 4 spaces or 2 tabs.</p>
<pre><code>* First Item
* Second Item
    + first sub-item
        - first sub-sub-item
    + second sub-item</code></pre>
<ul>
<li>First Item</li>
<li>Second Item
<ul>
<li>first sub-item
<ul>
<li>first sub-sub-item</li>
</ul></li>
<li>second sub-item</li>
</ul></li>
</ul>
<p>Ordered lists can be created using numbers and letters. If you need sub-sub-items use <code>A)</code> instead of <code>A.</code> on the third level.</p>
<pre><code>1. First item
    a. first sub-item
        A) first sub-sub-item 
     b. second sub-item
2. Second item</code></pre>
<ol style="list-style-type: decimal">
<li>First item
<ol style="list-style-type: lower-alpha">
<li>first sub-item
<ol style="list-style-type: upper-alpha">
<li>first sub-sub-item</li>
</ol></li>
<li>second sub-item</li>
</ol></li>
<li>Second item</li>
</ol>
</div>
<div id="text-formatting" class="section level4">
<h4><span class="header-section-number">2.5.2.3</span> Text formatting</h4>
<p>Text can be formatted in <em>italics</em> (<code>*italics*</code>) or <strong>bold</strong> (<code>**bold**</code>). In addition, you can ad block quotes with <code>&gt;</code></p>
<pre><code>&gt; Lorem ipsum dolor amet chillwave lomo ramps, four loko green juice messenger bag raclette forage offal shoreditch chartreuse austin. Slow-carb poutine meggings swag blog, pop-up salvia taxidermy bushwick freegan ugh poke.</code></pre>
<blockquote>
<p>Lorem ipsum dolor amet chillwave lomo ramps, four loko green juice messenger bag raclette forage offal shoreditch chartreuse austin. Slow-carb poutine meggings swag blog, pop-up salvia taxidermy bushwick freegan ugh poke.</p>
</blockquote>
</div>
</div>
<div id="r-code" class="section level3">
<h3><span class="header-section-number">2.5.3</span> R-Code</h3>
<p>R-code is contained in so called “chunks”. These chunks always start with three backticks and <code>r</code> in curly braces (<code></code>{r} <code>) and end with three backticks (</code> <code></code>). Optionally, parameters can be added after the <code>r</code> to influence how a chunk behaves. Additionally, you can also give each chunk a name. Note that these have to be <strong>unique</strong>, otherwise R will refuse to knit your document.</p>
<div id="global-and-chunk-options" class="section level4">
<h4><span class="header-section-number">2.5.3.1</span> Global and chunk options</h4>
<p>The first chunk always looks as follows</p>
<pre><code>```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```</code></pre>
<p>It is added to the document automatically and sets options for all the following chunks. These options can be overwritten on a per-chunk basis.</p>
<p>Keep <code>knitr::opts_chunk$set(echo = TRUE)</code> to print your code to the document you will hand in. Changing it to <code>knitr::opts_chunk$set(echo = FALSE)</code> will not print your code by default. This can be changed on a per-chunk basis.</p>
<pre><code>```{r cars, echo = FALSE}
summary(cars)

plot(dist~speed, cars)
```</code></pre>
<pre><code>##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00</code></pre>
<p><img src="_main_files/figure-html/cars-1.png" width="672" /></p>
<pre><code>```{r cars2, echo = TRUE}
summary(cars)

plot(dist~speed, cars)
```</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1"><span class="kw">summary</span>(cars)</a></code></pre></div>
<pre><code>##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1"><span class="kw">plot</span>(dist <span class="op">~</span><span class="st"> </span>speed, cars)</a></code></pre></div>
<p><img src="_main_files/figure-html/cars2-1.png" width="672" /></p>
<p>A good overview of all available global/chunk options can be found <a href="https://yihui.name/knitr/options/#chunk_options">here</a>.</p>
</div>
</div>
<div id="latex-math" class="section level3">
<h3><span class="header-section-number">2.5.4</span> LaTeX Math</h3>
<p>Writing well formatted mathematical formulae is done the same way as in <a href="https://en.wikipedia.org/wiki/LaTeX">LaTeX</a>. Math mode is started and ended using <code>$$</code>.</p>
<pre><code>$$
 f_1(\omega) = \frac{\sigma^2}{2 \pi},\ \omega \in[-\pi, \pi]
$$</code></pre>
<p><span class="math display">\[
 f_1(\omega) = \frac{\sigma^2}{2 \pi},\ \omega \in[-\pi, \pi]
\]</span></p>
<p>(for those interested this is the spectral density of <a href="https://en.wikipedia.org/wiki/White_noise">white noise</a>)</p>
<p>Including inline mathematical notation is done with a single <code>$</code> symbol.</p>
<pre><code>${2\over3}$ of my code is inline.
</code></pre>
<p><span class="math inline">\({2\over3}\)</span> of my code is inline.</p>
<p><br></p>
<p>Take a look at <a href="https://en.wikibooks.org/wiki/LaTeX/Mathematics#Symbols">this wikibook on Mathematics in LaTeX</a> and <a href="https://www.sharelatex.com/learn/List_of_Greek_letters_and_math_symbols">this list of Greek letters and mathematical symbols</a> if you are not familiar with LaTeX.</p>
<p>In order to write multi-line equations in the same math environment, use <code>\\</code> after every line. In order to insert a space use a single <code>\</code>. To render text inside a math environment use <code>\text{here is the text}</code>. In order to align equations start with <code>\begin{align}</code> and place an <code>&amp;</code> in each line at the point around which it should be aligned. Finally end with <code>\end{align}</code></p>
<pre><code>$$
\begin{align}
\text{First equation: }\ Y &amp;= X \beta + \epsilon_y,\ \forall X \\
\text{Second equation: }\ X &amp;= Z \gamma + \epsilon_x
\end{align}
$$</code></pre>
<p><span class="math display">\[
\begin{align}
\text{First equation: }\ Y &amp;= X \beta + \epsilon_y,\ \forall X \\
\text{Second equation: }\ X &amp;= Z \gamma + \epsilon_x
\end{align}
\]</span></p>
<div id="important-symbols" class="section level4">
<h4><span class="header-section-number">2.5.4.1</span> Important symbols</h4>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Symbol
</th>
<th style="text-align:left;">
Code
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a^{2} + b\)</span>
</td>
<td style="text-align:left;">
<code>a^{2} + b</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a^{2+b}\)</span>
</td>
<td style="text-align:left;">
<code>a^{2+b}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a_{1}\)</span>
</td>
<td style="text-align:left;">
<code>a_{1}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \leq b\)</span>
</td>
<td style="text-align:left;">
<code>a \leq b</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \geq b\)</span>
</td>
<td style="text-align:left;">
<code>a \geq b</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \neq b\)</span>
</td>
<td style="text-align:left;">
<code>a \neq b</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \approx b\)</span>
</td>
<td style="text-align:left;">
<code>a \approx b</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \in (0,1)\)</span>
</td>
<td style="text-align:left;">
<code>a \in (0,1)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a \rightarrow \infty\)</span>
</td>
<td style="text-align:left;">
<code>a \rightarrow \infty</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\frac{a}{b}\)</span>
</td>
<td style="text-align:left;">
<code>\frac{a}{b}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\frac{\partial a}{\partial b}\)</span>
</td>
<td style="text-align:left;">
<code>\frac{\partial a}{\partial b}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\sqrt{a}\)</span>
</td>
<td style="text-align:left;">
<code>\sqrt{a}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\sum_{i = 1}^{b} a_i\)</span>
</td>
<td style="text-align:left;">
<code>\sum_{i = 1}^{b} a_i</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\int_{a}^b f(c) dc\)</span>
</td>
<td style="text-align:left;">
<code>\int_{a}^b f(c) dc</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\prod_{i = 0}^b a_i\)</span>
</td>
<td style="text-align:left;">
<code>\prod_{i = 0}^b a_i</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(c \left( \sum_{i=1}^b a_i \right)\)</span>
</td>
<td style="text-align:left;">
<code>c \left( \sum_{i=1}^b a_i \right)</code>
</td>
</tr>
</tbody>
</table>
<p>The <code>{}</code> after <code>_</code> and <code>^</code> are not strictly necessary if there is only one character in the sub-/superscript. However, in order to place multiple characters in the sub-/superscript they are necessary.
e.g.</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Symbol
</th>
<th style="text-align:left;">
Code
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a^b = a^{b}\)</span>
</td>
<td style="text-align:left;">
<code>a^b = a^{b}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(a^b+c \neq a^{b+c}\)</span>
</td>
<td style="text-align:left;">
<code>a^b+c \neq a^{b+c}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\sum_i a_i = \sum_{i} a_{i}\)</span>
</td>
<td style="text-align:left;">
<code>\sum_i a_i = \sum_{i} a_{i}</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\sum_{i=1}^{b+c} a_i \neq \sum_i=1^b+c a_i\)</span>
</td>
<td style="text-align:left;">
<code>\sum_{i=1}^{b+c} a_i \neq \sum_i=1^b+c a_i</code>
</td>
</tr>
</tbody>
</table>
</div>
<div id="greek-letters" class="section level4">
<h4><span class="header-section-number">2.5.4.2</span> Greek letters</h4>
<p><a href="https://en.wikipedia.org/wiki/Greek_alphabet#Letters">Greek letters</a> are preceded by a <code>\</code> followed by their name (<code>$\beta$</code> = <span class="math inline">\(\beta\)</span>). In order to capitalize them simply capitalize the first letter of the name (<code>$\Gamma$</code> = <span class="math inline">\(\Gamma\)</span>).</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-statistical-inference.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
